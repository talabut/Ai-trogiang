
==============================
FILE: .\bundle.py
==============================
import os

# ====== C·∫§U H√åNH ======
CODE_OUTPUT_FILE = "project_code.txt"
TREE_OUTPUT_FILE = "project_tree.txt"

# Extension ƒë∆∞·ª£c ph√©p xu·∫•t n·ªôi dung
ALLOWED_EXTENSIONS = {
    ".py", ".jsx", ".js", ".css", ".html",
    ".json", ".yml", ".yaml", ".md", ".txt"
}

# Th∆∞ m·ª•c lo·∫°i tr·ª´ ho√†n to√†n
EXCLUDE_DIRS = {
    "venv",
    "node_modules",
    ".git",
    "__pycache__",
    ".pytest_cache",
    "dist",
    "build",
}

# File lo·∫°i tr·ª´
EXCLUDE_FILES = {
    ".DS_Store",
    ".gitignore",
}

# =====================


def should_exclude_file(filename: str) -> bool:
    if filename in EXCLUDE_FILES:
        return True
    if filename.startswith(".env"):
        return True
    return False


def export_project_code():
    with open(CODE_OUTPUT_FILE, "w", encoding="utf-8") as outfile:
        for root, dirs, files in os.walk("."):
            # Lo·∫°i th∆∞ m·ª•c r√°c ƒë√∫ng c√°ch
            dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]

            for file in files:
                if should_exclude_file(file):
                    continue

                if any(file.endswith(ext) for ext in ALLOWED_EXTENSIONS):
                    full_path = os.path.join(root, file)

                    outfile.write("\n" + "=" * 30 + "\n")
                    outfile.write(f"FILE: {full_path}\n")
                    outfile.write("=" * 30 + "\n")

                    try:
                        with open(full_path, "r", encoding="utf-8", errors="ignore") as infile:
                            outfile.write(infile.read())
                    except Exception as e:
                        outfile.write(f"\n[ERROR READING FILE]: {e}\n")

    print(f"‚úÖ ƒê√£ xu·∫•t to√†n b·ªô code + config v√†o: {CODE_OUTPUT_FILE}")


def export_project_tree():
    lines = []

    for root, dirs, files in os.walk("."):
        dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]

        level = root.replace(".", "").count(os.sep)
        indent = "‚îÇ   " * level

        folder_name = os.path.basename(root) if root != "." else os.path.abspath(".")
        lines.append(f"{indent}‚îú‚îÄ‚îÄ {folder_name}/")

        sub_indent = "‚îÇ   " * (level + 1)
        for file in files:
            if should_exclude_file(file):
                continue
            lines.append(f"{sub_indent}‚îú‚îÄ‚îÄ {file}")

    with open(TREE_OUTPUT_FILE, "w", encoding="utf-8") as f:
        f.write("\n".join(lines))

    print(f"‚úÖ ƒê√£ xu·∫•t c√¢y th∆∞ m·ª•c (ƒë√£ l·ªçc) v√†o: {TREE_OUTPUT_FILE}")


def main():
    export_project_code()
    export_project_tree()
    print("\nüéâ Ho√†n t·∫•t: ƒë√£ t·∫°o 2 file (CODE + TREE)")


if __name__ == "__main__":
    main()

==============================
FILE: .\check_imports.py
==============================
import pkgutil
import importlib
import traceback

BASE_PACKAGE = "backend"

errors = []

for module in pkgutil.walk_packages([BASE_PACKAGE], BASE_PACKAGE + "."):
    name = module.name
    try:
        importlib.import_module(name)
    except Exception as e:
        errors.append((name, e))

print("\n====== IMPORT ERRORS ======")
for name, err in errors:
    print(f"\n‚ùå {name}")
    traceback.print_exception(type(err), err, err.__traceback__)

print(f"\nTotal errors: {len(errors)}")

==============================
FILE: .\docker-compose.yml
==============================
version: "3.9"

services:
  backend:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data

==============================
FILE: .\main.py
==============================
# FILE: backend/main.py
import uvicorn
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

# Ch·ªâ import c√°c api nghi·ªáp v·ª• c∆° b·∫£n
from backend.api import upload, chat

app = FastAPI(title="AI Teaching Assistant - NO AUTH MVP")

# C·∫•u h√¨nh CORS cho Frontend (Port 5173)
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# --- ƒêƒÇNG K√ù ROUTER ---
# 1. Upload file (POST /upload/)
app.include_router(upload.router, prefix="/upload", tags=["Upload"])

# 2. Chat (POST /chat/query)
app.include_router(chat.router, prefix="/chat", tags=["AI Chat"])

@app.get("/")
def root():
    return {"message": "System is running (NO AUTH MODE)"}

if __name__ == "__main__":
    uvicorn.run("main:app", host="0.0.0.0", port=8000, reload=True)
==============================
FILE: .\package-lock.json
==============================
{
  "name": "ai-tro-giang",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "dependencies": {
        "axios": "^1.13.4"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.13.4.tgz",
      "integrity": "sha512-1wVkUaAO6WyaYtCkcYCOx12ZgpGf9Zif+qXa4n+oYzK558YryKqiL6UWwd5DqiH3VRW0GYhTZQ/vlgJrCoNQlg==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.5.tgz",
      "integrity": "sha512-8RipRLol37bNs2bhoV67fiTEvdTrbMUYcFTiy3+wuuOnUog2QBHCZWXDRijWQfAkhBj2Uf5UnVaiWwA5vdd82w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    }
  }
}

==============================
FILE: .\package.json
==============================
{
  "dependencies": {
    "axios": "^1.13.4"
  }
}

==============================
FILE: .\project_code.txt
==============================

==============================
FILE: .\bundle.py
==============================
import os

# ====== C·∫§U H√åNH ======
CODE_OUTPUT_FILE = "project_code.txt"
TREE_OUTPUT_FILE = "project_tree.txt"

# Extension ƒë∆∞·ª£c ph√©p xu·∫•t n·ªôi dung
ALLOWED_EXTENSIONS = {
    ".py", ".jsx", ".js", ".css", ".html",
    ".json", ".yml", ".yaml", ".md", ".txt"
}

# Th∆∞ m·ª•c lo·∫°i tr·ª´ ho√†n to√†n
EXCLUDE_DIRS = {
    "venv",
    "node_modules",
    ".git",
    "__pycache__",
    ".pytest_cache",
    "dist",
    "build",
}

# File lo·∫°i tr·ª´
EXCLUDE_FILES = {
    ".DS_Store",
    ".gitignore",
}

# =====================


def should_exclude_file(filename: str) -> bool:
    if filename in EXCLUDE_FILES:
        return True
    if filename.startswith(".env"):
        return True
    return False


def export_project_code():
    with open(CODE_OUTPUT_FILE, "w", encoding="utf-8") as outfile:
        for root, dirs, files in os.walk("."):
            # Lo·∫°i th∆∞ m·ª•c r√°c ƒë√∫ng c√°ch
            dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]

            for file in files:
                if should_exclude_file(file):
                    continue

                if any(file.endswith(ext) for ext in ALLOWED_EXTENSIONS):
                    full_path = os.path.join(root, file)

                    outfile.write("\n" + "=" * 30 + "\n")
                    outfile.write(f"FILE: {full_path}\n")
                    outfile.write("=" * 30 + "\n")

                    try:
                        with open(full_path, "r", encoding="utf-8", errors="ignore") as infile:
                            outfile.write(infile.read())
                    except Exception as e:
                        outfile.write(f"\n[ERROR READING FILE]: {e}\n")

    print(f"‚úÖ ƒê√£ xu·∫•t to√†n b·ªô code + config v√†o: {CODE_OUTPUT_FILE}")


def export_project_tree():
    lines = []

    for root, dirs, files in os.walk("."):
        dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]

        level = root.replace(".", "").count(os.sep)
        indent = "‚îÇ   " * level

        folder_name = os.path.basename(root) if root != "." else os.path.abspath(".")
        lines.append(f"{indent}‚îú‚îÄ‚îÄ {folder_name}/")

        sub_indent = "‚îÇ   " * (level + 1)
        for file in files:
            if should_exclude_file(file):
                continue
            lines.append(f"{sub_indent}‚îú‚îÄ‚îÄ {file}")

    with open(TREE_OUTPUT_FILE, "w", encoding="utf-8") as f:
        f.write("\n".join(lines))

    print(f"‚úÖ ƒê√£ xu·∫•t c√¢y th∆∞ m·ª•c (ƒë√£ l·ªçc) v√†o: {TREE_OUTPUT_FILE}")


def main():
    export_project_code()
    export_project_tree()
    print("\nüéâ Ho√†n t·∫•t: ƒë√£ t·∫°o 2 file (CODE + TREE)")


if __name__ == "__main__":
    main()

==============================
FILE: .\check_imports.py
==============================
import pkgutil
import importlib
import traceback

BASE_PACKAGE = "backend"

errors = []

for module in pkgutil.walk_packages([BASE_PACKAGE], BASE_PACKAGE + "."):
    name = module.name
    try:
        importlib.import_module(name)
    except Exception as e:
        errors.append((name, e))

print("\n====== IMPORT ERRORS ======")
for name, err in errors:
    print(f"\n‚ùå {name}")
    traceback.print_exception(type(err), err, err.__traceback__)

print(f"\nTotal errors: {len(errors)}")

==============================
FILE: .\docker-compose.yml
==============================
version: "3.9"

services:
  backend:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data

==============================
FILE: .\main.py
==============================
# FILE: backend/main.py
import uvicorn
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

# Ch·ªâ import c√°c api nghi·ªáp v·ª• c∆° b·∫£n
from backend.api import upload, chat

app = FastAPI(title="AI Teaching Assistant - NO AUTH MVP")

# C·∫•u h√¨nh CORS cho Frontend (Port 5173)
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# --- ƒêƒÇNG K√ù ROUTER ---
# 1. Upload file (POST /upload/)
app.include_router(upload.router, prefix="/upload", tags=["Upload"])

# 2. Chat (POST /chat/query)
app.include_router(chat.router, prefix="/chat", tags=["AI Chat"])

@app.get("/")
def root():
    return {"message": "System is running (NO AUTH MODE)"}

if __name__ == "__main__":
    uvicorn.run("main:app", host="0.0.0.0", port=8000, reload=True)
==============================
FILE: .\package-lock.json
==============================
{
  "name": "ai-tro-giang",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "dependencies": {
        "axios": "^1.13.4"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.13.4.tgz",
      "integrity": "sha512-1wVkUaAO6WyaYtCkcYCOx12ZgpGf9Zif+qXa4n+oYzK558YryKqiL6UWwd5DqiH3VRW0GYhTZQ/vlgJrCoNQlg==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.5.tgz",
      "integrity": "sha512-8RipRLol37bNs2bhoV67fiTEvdTrbMUYcFTiy3+wuuOnUog2QBHCZWXDRijWQfAkhBj2Uf5UnVaiWwA5vdd82w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    }
  }
}

==============================
FILE: .\quick_test.py
==============================
import os
import sys
from pathlib import Path

# ƒê·∫£m b·∫£o Python t√¨m th·∫•y module backend
sys.path.append(str(Path(__file__).parent))

def setup_and_test():
    print("üöÄ B·∫Øt ƒë·∫ßu ki·ªÉm tra h·ªá th·ªëng...")

    # 1. T·∫°o c√°c th∆∞ m·ª•c c·∫ßn thi·∫øt
    folders = ["data/faiss_index", "data/bm25", "uploads"]
    for f in folders:
        os.makedirs(f, exist_ok=True)
        print(f"‚úÖ ƒê√£ t·∫°o/ki·ªÉm tra th∆∞ m·ª•c: {f}")

    # 2. T·∫°o file d·ªØ li·ªáu m·∫´u ƒë·ªÉ test
    sample_file = "uploads/test_knowledge.txt"
    with open(sample_file, "w", encoding="utf-8") as f:
        f.write("Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† H√† N·ªôi. Kh√≥a h·ªçc ML101 d·∫°y v·ªÅ Machine Learning c∆° b·∫£n.")
    print(f"‚úÖ ƒê√£ t·∫°o file d·ªØ li·ªáu m·∫´u: {sample_file}")

    # 3. Test Ingest
    print("üì• ƒêang n·∫°p d·ªØ li·ªáu v√†o Vector DB...")
    from backend.rag.ingest import ingest_document
    try:
        ingest_document(sample_file, "ML101")
        print("‚úÖ Ingest th√†nh c√¥ng!")
    except Exception as e:
        print(f"‚ùå L·ªói Ingest: {e}")
        return

    # 4. Test Query
    print("üîç ƒêang th·ª≠ h·ªèi AI...")
    from backend.agent.qa import answer_question
    result = answer_question("Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?", "ML101")
    
    print("\n--- K·∫æT QU·∫¢ TEST ---")
    print(f"C√¢u h·ªèi: Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?")
    print(f"AI tr·∫£ l·ªùi: {result['answer']}")
    if result['sources']:
        print(f"Ngu·ªìn t√¨m th·∫•y: {len(result['sources'])} ƒëo·∫°n vƒÉn.")
        print("üéâ H·ªÜ TH·ªêNG ƒê√É S·∫¥N S√ÄNG!")
    else:
        print("‚ö†Ô∏è AI tr·∫£ l·ªùi nh∆∞ng kh√¥ng t√¨m th·∫•y ngu·ªìn. Ki·ªÉm tra l·∫°i hybrid_retriever.")

if __name__ == "__main__":
    setup_and_test()
==============================
FILE: .\README.md
==============================
# AI Tr·ª£ Gi·∫£ng (RAG-based Tutor Assistant)

D·ª± √°n AI tr·ª£ gi·∫£ng s·ª≠ d·ª•ng ki·∫øn tr√∫c **RAG (Retrieval-Augmented Generation)**:
- Ingest t√†i li·ªáu h·ªçc t·∫≠p (TXT / PDF / DOCX)
- L∆∞u vector b·∫±ng FAISS
- Tr·∫£ l·ªùi c√¢u h·ªèi d·ª±a tr√™n t√†i li·ªáu (kh√¥ng b·ªãa)

---

## 1. C·∫•u tr√∫c d·ª± √°n

backend/
agent/ # AI tutor logic
rag/ # ingest + retriever
api/ # FastAPI endpoints
main.py
data/
raw_docs/ # t√†i li·ªáu ƒë·∫ßu v√†o (GV upload)
faiss_index/ # vector database


---

## 2. C√†i ƒë·∫∑t m√¥i tr∆∞·ªùng

```bash
python -m venv venv
source venv/bin/activate   # Windows: venv\Scripts\activate
pip install -r requirements.txt

==============================
FILE: .\requirements.txt
==============================
fastapi
uvicorn
python-multipart
python-jose
passlib[bcrypt]

langchain-core
langchain-community
langchain-text-splitters
faiss-cpu
sentence-transformers
transformers
torch
pypdf
python-docx

# --- OCR & PDF Processing ---
pdf2image
paddlepaddle>=2.6.2
paddleocr>=2.7.0
opencv-python-headless

# ... c√°c th∆∞ vi·ªán c≈© ...
llama-index-core
llama-index-embeddings-huggingface
llama-index-vector-stores-faiss
llama-index-readers-file
==============================
FILE: .\test.txt
==============================
H·ªçc m√°y l√† m·ªôt lƒ©nh v·ª±c c·ªßa tr√≠ tu·ªá nh√¢n t·∫°o.

==============================
FILE: .\backend\__init__.py
==============================

==============================
FILE: .\backend\agent\prompt.py
==============================
SYSTEM_PROMPT = """
B·∫°n l√† AI tr·ª£ gi·∫£ng h·ªçc thu·∫≠t.

Quy t·∫Øc b·∫Øt bu·ªôc:
- Ch·ªâ tr·∫£ l·ªùi d·ª±a tr√™n n·ªôi dung t√†i li·ªáu ƒë∆∞·ª£c cung c·∫•p.
- N·∫øu kh√¥ng t√¨m th·∫•y th√¥ng tin trong t√†i li·ªáu, h√£y tr·∫£ l·ªùi: 
  "T√¥i kh√¥ng t√¨m th·∫•y th√¥ng tin trong t√†i li·ªáu."
- Kh√¥ng ƒë∆∞·ª£c suy ƒëo√°n ho·∫∑c b·ªãa.
- Tr·∫£ l·ªùi ng·∫Øn g·ªçn, ƒë√∫ng tr·ªçng t√¢m.
"""

==============================
FILE: .\backend\agent\qa.py
==============================
from typing import Dict, Any, List
import json
from backend.rag.hybrid_retriever import hybrid_search
from backend.llm.llm import get_llm

# --- CONFIGURATION ---
THRESHOLD = 0.05 # Strict threshold after normalization/fusion

def answer_question(question: str, course_id: str) -> Dict[str, Any]:
    """
    Generates answer with strict citations using Hybrid RAG.
    """
    
    # 1. Retrieval (Hybrid)
    results = hybrid_search(question, course_id)
    
    # 2. Refusal Logic (Step 6)
    if not results or results[0]["final_score"] < THRESHOLD:
        return {
            "answer": "T√¥i kh√¥ng t√¨m th·∫•y th√¥ng tin ph√π h·ª£p trong t√†i li·ªáu ƒë√£ cung c·∫•p ƒë·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi n√†y.",
            "citations": []
        }

    # 3. Context Assembly (Step 4)
    # Build context string with strict metadata markers
    context_str = ""
    valid_citations = []
    
    for i, item in enumerate(results):
        meta = item["metadata"]
        text = item["text"]
        
        # Safe get metadata for citation
        doc_id = meta.get("doc_id", "Unknown")
        file_name = meta.get("file_name", "Unknown")
        page = meta.get("page", "N/A")
        line_start =Hz = meta.get("line_start", "?")
        line_end = meta.get("line_end", "?")
        
        # Marker for LLM reference
        marker_id = f"REF_{i+1}"
        
        context_str += f"\n--- [{marker_id}] (File: {file_name}, Page: {page}, Lines: {line_start}-{line_end}) ---\n"
        context_str += f"{text}\n"

        valid_citations.append({
            "ref_id": marker_id,
            "doc_id": doc_id,
            "page": page,
            "line_start": line_start,
            "line_end": line_end,
            "file_name": file_name,
            "score": round(item["final_score"], 4)
        })

    # 4. Prompt Engineering (Step 5)
    prompt = f"""
B·∫°n l√† AI Tr·ª£ Gi·∫£ng h·ªçc thu·∫≠t nghi√™m t√∫c.
Nhi·ªám v·ª•: Tr·∫£ l·ªùi c√¢u h·ªèi d·ª±a tr√™n c√°c ƒëo·∫°n vƒÉn b·∫£n (Context) ƒë∆∞·ª£c cung c·∫•p d∆∞·ªõi ƒë√¢y.

QUY T·∫ÆC B·∫ÆT BU·ªòC:
1. Ch·ªâ s·ª≠ d·ª•ng th√¥ng tin c√≥ trong Context. KH√îNG b·ªãa ƒë·∫∑t, KH√îNG d√πng ki·∫øn th·ª©c ngo√†i.
2. N·∫øu Context kh√¥ng ƒë·ªß th√¥ng tin ƒë·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi, h√£y n√≥i "T√¥i kh√¥ng t√¨m th·∫•y th√¥ng tin trong t√†i li·ªáu."
3. Khi tr√≠ch d·∫´n th√¥ng tin, h√£y ghi ch√∫ ngu·ªìn (v√≠ d·ª•: Theo t√†i li·ªáu [REF_1]...).

CONTEXT:
{context_str}

C√ÇU H·ªéI: 
{question}

TR·∫¢ L·ªúI:
"""

    # 5. Call LLM
    llm = get_llm()
    # Note: The LocalMockLLM in current codebase parses regex "Ng·ªØ c·∫£nh t√†i li·ªáu:". 
    # Since we changed the prompt format, we might need to update llm.py OR adapt the prompt to match regex.
    # To be safe with existing llm.py regex , let's add the specific marker it looks for:
    
    safe_prompt = f"Ng·ªØ c·∫£nh t√†i li·ªáu:\n{context_str}\nC√¢u h·ªèi ng∆∞·ªùi d√πng:\n{question}"
    
    raw_answer = llm.invoke(safe_prompt)

    # 6. Final Output Construction
    # We clean up the citation list to match the requirement schema
    final_citations = []
    for c in valid_citations:
        final_citations.append({
            "doc_id": c["doc_id"],
            "page": c["page"],
            "line_start": c["line_start"],
            "line_end": c["line_end"],
            "file_name": c["file_name"]
        })

    return {
        "answer": raw_answer,
        "citations": final_citations
    }
==============================
FILE: .\backend\agent\__init__.py
==============================

==============================
FILE: .\backend\api\chat.py
==============================
# FILE: backend/api/chat.py
from fastapi import APIRouter, HTTPException
from pydantic import BaseModel
from backend.agent.qa import answer_question

router = APIRouter()

class ChatRequest(BaseModel):
    question: str
    course_id: str = "ML101"  # Default value ƒë·ªÉ tr√°nh l·ªói n·∫øu thi·∫øu

# S·ª¨A: ƒê·ªïi path th√†nh "/query" ƒë·ªÉ kh·ªõp v·ªõi prefix "/chat" ·ªü main.py
# URL th·ª±c t·∫ø s·∫Ω l√†: POST http://localhost:8000/chat/query
@router.post("/query")
async def chat_query(request: ChatRequest):
    try:
        # G·ªçi logic RAG
        result = answer_question(request.question, request.course_id)
        return result
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
==============================
FILE: .\backend\api\upload.py
==============================
from fastapi import APIRouter, File, UploadFile, Query
import shutil
import os
from pathlib import Path

from backend.utils.text_extraction import extract_text
from backend.rag.canonicalize import canonicalize_pages
from backend.rag.chunking import chunk_canonical_pages
from backend.rag.llama_ingest import ingest_canonical_chunks

router = APIRouter()

UPLOAD_DIR = "backend/data/raw_docs"
os.makedirs(UPLOAD_DIR, exist_ok=True)

@router.post("/")
async def upload_file(
    file: UploadFile = File(...),
    course_id: str = Query("ML101")
):
    # 1. Save file
    file_path = os.path.join(UPLOAD_DIR, file.filename)
    with open(file_path, "wb") as buffer:
        shutil.copyfileobj(file.file, buffer)

    # 2. Extract raw pages
    # EXPECT: List[Dict] [{page_num, text, ...}]
    raw_pages = extract_text(file_path)

    # 3. Canonicalize pages
    canonical_pages = canonicalize_pages(raw_pages)

    # 4. Chunking
    doc_id = Path(file.filename).stem
    chunks = chunk_canonical_pages(canonical_pages)

    # 5. Ingest into LlamaIndex
    ingest_canonical_chunks(
        chunks=chunks,
        course_id=course_id,
        file_name=file.filename,
        doc_id=doc_id
    )

    return {
        "filename": file.filename,
        "course_id": course_id,
        "doc_id": doc_id,
        "chunks": len(chunks),
        "status": "uploaded_and_ingested"
    }

==============================
FILE: .\backend\api\__init__.py
==============================

==============================
FILE: .\backend\database\db_config.py
==============================
import sqlite3
from pathlib import Path

DB_PATH = Path("data/app_database.db")

def get_db_connection():
    DB_PATH.parent.mkdir(parents=True, exist_ok=True)
    conn = sqlite3.connect(DB_PATH)
    conn.row_factory = sqlite3.Row # ƒê·ªÉ truy xu·∫•t theo t√™n c·ªôt
    return conn

def init_db():
    conn = get_db_connection()
    # T·∫°o b·∫£ng kh√≥a h·ªçc v√† b·∫£ng ng∆∞·ªùi d√πng n·∫øu ch∆∞a c√≥
    conn.execute('''
        CREATE TABLE IF NOT EXISTS courses (
            id TEXT PRIMARY KEY,
            name TEXT NOT NULL,
            teacher_id TEXT NOT NULL,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    ''')
    conn.commit()
    conn.close()
==============================
FILE: .\backend\llm\llm.py
==============================
import re

class LocalMockLLM:
    """
    Mock LLM Engine: X·ª≠ l√Ω c√¢u tr·∫£ l·ªùi d·ª±a tr√™n Retrieval Context.
    ƒê·∫£m b·∫£o kh√¥ng ph·ª• thu·ªôc v√†o th∆∞ vi·ªán b√™n ngo√†i (g4f, openai, etc.)
    """
    def __init__(self, model_name: str = "offline-pedagogy-v1"):
        self.model_name = model_name

    def invoke(self, prompt: str) -> str:
        # 1. Tr√≠ch xu·∫•t ng·ªØ c·∫£nh t·ª´ prompt (D·ª±a tr√™n c·∫•u tr√∫c trong qa.py)
        # T√¨m n·ªôi dung n·∫±m gi·ªØa 'Ng·ªØ c·∫£nh t√†i li·ªáu:' v√† 'C√¢u h·ªèi ng∆∞·ªùi d√πng:'
        context_match = re.search(r"Ng·ªØ c·∫£nh t√†i li·ªáu:(.*?)C√¢u h·ªèi ng∆∞·ªùi d√πng:", prompt, re.DOTALL)
        
        if not context_match:
            return "T√¥i kh√¥ng t√¨m th·∫•y th√¥ng tin ph√π h·ª£p trong t√†i li·ªáu c·ªßa kh√≥a h·ªçc n√†y."

        context = context_match.group(1).strip()
        
        # 2. Logic Rule-based: Tr·∫£ v·ªÅ ƒëo·∫°n vƒÉn b·∫£n ph√π h·ª£p nh·∫•t t·ª´ context
        # ·ªû ƒë√¢y ta ∆∞u ti√™n tr·∫£ v·ªÅ to√†n b·ªô ng·ªØ c·∫£nh ƒë√£ ƒë∆∞·ª£c t√¨m th·∫•y b·ªüi RAG
        if len(context) > 5:
            return f"D·ª±a tr√™n t√†i li·ªáu kh√≥a h·ªçc, t√¥i xin gi·∫£i ƒë√°p nh∆∞ sau:\n\n{context}"
        
        return "T√†i li·ªáu ƒë∆∞·ª£c cung c·∫•p kh√¥ng ƒë·ªß th√¥ng tin ƒë·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi n√†y."

# Kh·ªüi t·∫°o instance duy nh·∫•t cho to√†n h·ªá th·ªëng
llm_instance = LocalMockLLM()

def get_llm():
    return llm_instance
==============================
FILE: .\backend\llm\__init__.py
==============================

==============================
FILE: .\backend\rag\canonicalize.py
==============================
from typing import List, Dict, Any

def canonicalize_pages(extracted_pages: List[Dict[str, Any]]) -> List[Dict[str, Any]]:
    """
    Chuy·ªÉn ƒë·ªïi d·ªØ li·ªáu th√¥ t·ª´ PDF/OCR th√†nh Canonical Structured Data.
    
    Quy t·∫Øc:
    - Input: List[{page, text, source}]
    - Output: List[{page, source, lines: [{line_id, text}]}]
    - X·ª≠ l√Ω: T√°ch d√≤ng, clean whitespace, ƒë√°nh s·ªë line_id n·ªôi b·ªô theo trang.
    
    Args:
        extracted_pages (List[Dict]): D·ªØ li·ªáu t·ª´ b∆∞·ªõc PDF->TXT.

    Returns:
        List[Dict]: C·∫•u tr√∫c d·ªØ li·ªáu chu·∫©n h√≥a theo d√≤ng.
    """
    # 1. ƒê·∫£m b·∫£o ƒë√∫ng th·ª© t·ª± trang (tƒÉng d·∫ßn)
    sorted_pages = sorted(extracted_pages, key=lambda x: x.get("page", 0))
    
    canonical_data = []

    for page_data in sorted_pages:
        page_num = page_data.get("page", 0)
        source = page_data.get("source", "unknown")
        raw_text = page_data.get("text", "") or ""

        clean_lines_list = []
        line_counter = 1
        
        # T√°ch d√≤ng d·ª±a tr√™n k√Ω t·ª± newline
        raw_lines = raw_text.splitlines()
        
        for line in raw_lines:
            # 2. Clean text: Strip whitespace ƒë·∫ßu/cu·ªëi
            clean_content = line.strip()
            
            # 3. B·ªè d√≤ng r·ªóng ho√†n to√†n
            if not clean_content:
                continue
                
            # 4. T·∫°o Line Object
            clean_lines_list.append({
                "line_id": line_counter,
                "text": clean_content
            })
            line_counter += 1

        # T·∫°o Page Object ho√†n ch·ªânh
        page_structure = {
            "page": page_num,
            "source": source,
            "lines": clean_lines_list
        }
        
        canonical_data.append(page_structure)

    return canonical_data
==============================
FILE: .\backend\rag\chunking.py
==============================
# FILE: backend/rag/chunking.py
import uuid
from typing import List, Dict, Any

# C·∫§U H√åNH SOFT RULES
MIN_CHUNK_CHARS = 300
MAX_CHUNK_CHARS = 800

def chunk_canonical_data(
    canonical_pages: List[Dict[str, Any]], 
    doc_id: str
) -> List[Dict[str, Any]]:
    """
    T·∫°o chunks t·ª´ d·ªØ li·ªáu Canonical tu√¢n th·ªß Strict Page/Line Boundaries.
    
    Args:
        canonical_pages: Output t·ª´ b∆∞·ªõc canonicalize (List c√°c Page objects).
        doc_id: ID c·ªßa t√†i li·ªáu g·ªëc.

    Returns:
        List[Dict]: Danh s√°ch chunks theo schema b·∫Øt bu·ªôc.
    """
    chunks = []

    # RULE 1: Duy·ªát theo t·ª´ng Page (Kh√¥ng bao gi·ªù v∆∞·ª£t Page)
    for page_data in canonical_pages:
        page_num = page_data.get("page")
        lines = page_data.get("lines", [])
        
        if not lines:
            continue

        # Buffer cho chunk hi·ªán t·∫°i
        current_buffer = []
        current_char_count = 0
        
        # Duy·ªát tu·∫ßn t·ª± c√°c d√≤ng trong trang
        for i, line in enumerate(lines):
            line_text = line.get("text", "")
            line_len = len(line_text)
            
            # Th√™m d√≤ng v√†o buffer t·∫°m
            current_buffer.append(line)
            current_char_count += line_len
            
            # RULE 4 (Soft): Ki·ªÉm tra k√≠ch th∆∞·ªõc ƒë·ªÉ ng·∫Øt chunk
            # Ng·∫Øt khi v∆∞·ª£t qu√° MAX_CHUNK_CHARS ho·∫∑c l√† d√≤ng cu·ªëi c√πng c·ªßa trang
            is_last_line = (i == len(lines) - 1)

            if (
                is_last_line
                or (
                    current_char_count >= MIN_CHUNK_CHARS
                    and (i + 1 < len(lines))
                    and (current_char_count + len(lines[i + 1].get("text", ""))) > MAX_CHUNK_CHARS
                )
            ):
                if current_buffer:
                    chunk_text = "\n".join([l["text"] for l in current_buffer])
                    
                    chunk_obj = {
                        "doc_id": doc_id,
                        "page": page_num,
                        "line_start": current_buffer[0]["line_id"],
                        "line_end": current_buffer[-1]["line_id"],
                        "text": chunk_text
                    }
                    
                    chunks.append(chunk_obj)
                
                current_buffer = []
                current_char_count = 0

    return chunks
==============================
FILE: .\backend\rag\hybrid_retriever.py
==============================
from backend.vectorstore.faiss_store import get_faiss_store
from backend.vectorstore.bm25_store import BM25Store
import os

def hybrid_search(query: str, course_id: str = "default_course", k: int = 5):
    """
    T√¨m ki·∫øm k·∫øt h·ª£p Vector + BM25.
    FIX: Th√™m default course_id ƒë·ªÉ pass test v√† tr√°nh TypeError.
    """
    # B. GUARDRAILS: X·ª≠ l√Ω query r·ªóng ho·∫∑c qu√° ng·∫Øn (test_empty_query, test_short_query)
    if not query or len(query.strip()) < 2:
        return []

    # ƒê∆∞·ªùng d·∫´n index d·ª±a tr√™n course_id
    index_path = os.path.join("data", "faiss_index", course_id)
    vector_store = get_faiss_store(index_path)
    bm25_store = BM25Store.load(course_id)

    vector_results = []
    if vector_store:
        try:
            vector_results = vector_store.similarity_search_with_score(query, k=k)
        except Exception:
            vector_results = []

    bm25_results = []
    if bm25_store:
        try:
            bm25_results = bm25_store.search(query, k=k)
        except Exception:
            bm25_results = []

    combined = []
    # Format k·∫øt qu·∫£ chu·∫©n h√≥a
    for doc, score in vector_results:
        combined.append({
            "content": doc.page_content,
            "source_file": doc.metadata.get("source_file", "Unknown"),
            "score": float(score),
            "type": "vector"
        })

    for doc, score in bm25_results:
        combined.append({
            "content": doc.page_content,
            "source_file": doc.metadata.get("source_file", "Unknown"),
            "score": float(score),
            "type": "bm25"
        })

    return combined[:k]
==============================
FILE: .\backend\rag\ingest.py
==============================
import os
from pathlib import Path
from langchain_community.vectorstores import FAISS

from backend.vectorstore.faiss_store import get_faiss_store, embeddings_instance
from backend.utils.text_extraction import extract_text
from backend.utils.chunking import chunk_text
from backend.vectorstore.bm25_store import BM25Store

RAW_DOCS_DIR = "data/raw_docs"

def ingest_document(file_path: str, course_id: str):
    # 1. Generate Document ID & Filename
    file_name = os.path.basename(file_path)
    document_id = Path(file_path).stem
    
    print(f"üì• Starting Ingestion: {file_name} (ID: {document_id})")

    # 2. Extract Text -> Canonical Format (Page-delimited)
    canonical_content = extract_text(file_path, document_id)

    # 3. Persist Canonical TXT
    if not os.path.exists(RAW_DOCS_DIR):
        os.makedirs(RAW_DOCS_DIR)
        
    txt_path = os.path.join(RAW_DOCS_DIR, f"{document_id}.txt")
    with open(txt_path, "w", encoding="utf-8") as f:
        f.write(canonical_content)

    # 4. Chunking (D·ª±a tr√™n header trong canonical content)
    # chunk_text s·∫Ω parse header ƒë·ªÉ l·∫•y metadata (page, ocr flag)
    docs = chunk_text(canonical_content, source_file=file_name)

    if not docs:
        print("‚ö†Ô∏è Warning: No chunks generated.")
        return

    # 5. Ingest FAISS
    index_path = os.path.join("data", "faiss_index", course_id)
    
    if os.path.exists(os.path.join(index_path, "index.faiss")):
        vector_store = FAISS.load_local(
            index_path, 
            embeddings_instance, 
            allow_dangerous_deserialization=True
        )
        vector_store.add_documents(docs)
    else:
        vector_store = FAISS.from_documents(docs, embeddings_instance)

    if not os.path.exists(os.path.dirname(index_path)):
        os.makedirs(os.path.dirname(index_path))
    
    vector_store.save_local(index_path)

    # 6. Ingest BM25
    bm25_store = BM25Store.load(course_id)
    bm25_store.add_documents(docs)
    bm25_store.save()

    print(f"‚úÖ Ingest Complete: {len(docs)} chunks indexed for {course_id}")
==============================
FILE: .\backend\rag\llama_config.py
==============================
# FILE: backend/rag/llama_config.py
from llama_index.embeddings.huggingface import HuggingFaceEmbedding
from llama_index.core import Settings

# C·∫•u h√¨nh Embedding Model (D√πng chung 1 model duy nh·∫•t)
EMBEDDING_MODEL_NAME = "sentence-transformers/all-MiniLM-L6-v2"

def get_embedding_model():
    return HuggingFaceEmbedding(model_name=EMBEDDING_MODEL_NAME)

# Thi·∫øt l·∫≠p Global Settings
Settings.embed_model = get_embedding_model()
Settings.llm = None  # Ingest phase kh√¥ng c·∫ßn LLM
==============================
FILE: .\backend\rag\llama_ingest.py
==============================
# FILE: backend/rag/llama_ingest.py
import os
import faiss
from typing import List, Set

from llama_index.core import (
    VectorStoreIndex, 
    StorageContext, 
    load_index_from_storage
)
from llama_index.vector_stores.faiss import FaissVectorStore

# Import internal modules
from backend.rag.llama_config import get_embedding_model
from backend.rag.node_parser import convert_chunks_to_nodes

# Path for Index Storage
INDEX_ROOT_DIR = "data/llama_index"

def get_index_path(course_id: str) -> str:
    return os.path.join(INDEX_ROOT_DIR, course_id)

def get_or_create_index(course_id: str, vector_dim: int = 384) -> VectorStoreIndex:
    """
    Load existing index or create new one with FAISS backend.
    """
    persist_dir = get_index_path(course_id)
    
    # 1. Try Loading Existing Index
    if os.path.exists(persist_dir) and os.path.exists(os.path.join(persist_dir, "docstore.json")):
        try:
            vector_store = FaissVectorStore.from_persist_dir(persist_dir)
            storage_context = StorageContext.from_defaults(
                vector_store=vector_store, 
                persist_dir=persist_dir
            )
            index = load_index_from_storage(storage_context, embed_model=get_embedding_model())
            return index
        except Exception as e:
            print(f"‚ö†Ô∏è Error loading index: {e}. Recreating...")
    
    # 2. Create New Index if load failed or not exists
    print(f"üÜï Creating new LlamaIndex for {course_id}...")
    faiss_index = faiss.IndexFlatL2(vector_dim)
    vector_store = FaissVectorStore(faiss_index=faiss_index)
    storage_context = StorageContext.from_defaults(vector_store=vector_store)
    
    index = VectorStoreIndex(
        nodes=[], 
        storage_context=storage_context, 
        embed_model=get_embedding_model()
    )
    return index

def ingest_canonical_chunks(
    chunks: List[dict], 
    course_id: str, 
    file_name: str,
    doc_id: str
):
    """
    Main Pipeline: Chunk -> Node -> Deduplicate -> Index -> Persist
    """
    persist_dir = get_index_path(course_id)

    # 1. Convert to LlamaIndex Nodes
    new_nodes = convert_chunks_to_nodes(chunks, doc_id, file_name)
    
    if not new_nodes:
        print("‚ö†Ô∏è No valid nodes to ingest.")
        return None

    # 2. Initialize/Load Index
    index = get_or_create_index(course_id)
    
    # 3. Deduplication Logic (Strict Check)
    # Check against keys in DocStore (since node.id_ is set to content_hash)
    existing_hashes: Set[str] = set()
    try:
        # This gets all keys in the docstore. For MVP/medium data, this is acceptable.
        for node_id in index.docstore.docs.keys():
            existing_hashes.add(node_id)
    except Exception:
        pass 

    nodes_to_insert = []
    skipped_count = 0

    for node in new_nodes:
        if node.node_id in existing_hashes:
            skipped_count += 1
            continue
        
        nodes_to_insert.append(node)
        existing_hashes.add(node.node_id) # Add to local set for batch dedup

    if skipped_count > 0:
        print(f"üîé Dedup check: Skipped {skipped_count} duplicate chunks.")

    # 4. Insert Nodes & Persist
    if nodes_to_insert:
        index.insert_nodes(nodes_to_insert)
        print(f"‚úÖ Inserted {len(nodes_to_insert)} new nodes.")
        
        if not os.path.exists(persist_dir):
            os.makedirs(persist_dir)
        
        index.storage_context.persist(persist_dir=persist_dir)
        print(f"üíæ Index saved to {persist_dir}")
    else:
        print("‚è© No new unique nodes to index.")

    return index
==============================
FILE: .\backend\rag\node_parser.py
==============================
# FILE: backend/rag/node_parser.py
import hashlib
from datetime import datetime
from typing import List, Dict, Any
from llama_index.core.schema import TextNode

# Configuration
INGEST_VERSION = "v1.0"
EMBEDDING_MODEL_TAG = "sentence-transformers/all-MiniLM-L6-v2"

def compute_content_hash(text: str) -> str:
    """Generate SHA256 hash for text content to detect duplicates."""
    return hashlib.sha256(text.encode('utf-8')).hexdigest()

def convert_chunks_to_nodes(
    chunks: List[Dict[str, Any]], 
    document_id: str,
    file_name: str
) -> List[TextNode]:
    """
    Convert Chunk Dicts to LlamaIndex TextNodes with strict metadata mapping.
    One Chunk = One TextNode.
    """
    nodes = []
    
    for chunk in chunks:
        # 1. Validate Input
        text_content = chunk.get("text", "")
        if not text_content.strip():
            continue
            
        content_hash = compute_content_hash(text_content)
        
        # 2. Build Strict Metadata (Page + Lines)
        metadata = {
            "doc_id": document_id,
            "file_name": file_name,
            "page": chunk.get("page"),           # Strict: must be present
            "line_start": chunk.get("line_start"),
            "line_end": chunk.get("line_end"),
            "source": chunk.get("sources", ["unknown"])[0] if "sources" in chunk else "unknown",
            "content_hash": content_hash,
            "ingest_time": datetime.utcnow().isoformat(),
            "index_version": INGEST_VERSION,
            "embedding_model": EMBEDDING_MODEL_TAG
        }

        # 3. Create TextNode
        # Use content_hash as ID for system-level deduplication capability
        node = TextNode(
            text=text_content,
            id_=content_hash, 
            metadata=metadata
        )
        
        # 4. Exclude metadata from Embedding and LLM context to save tokens/noise
        # Embedding sees only text (and maybe context if configured, but keeping it clean here)
        node.excluded_embed_metadata_keys = [
            "ingest_time", "index_version", "content_hash", 
            "line_start", "line_end", "embedding_model", "doc_id", "page", "file_name", "source"
        ]
        # LLM sees text + minimal context (page, source)
        node.excluded_llm_metadata_keys = [
            "content_hash", "index_version", "embedding_model", "ingest_time", "doc_id"
        ]

        nodes.append(node)

    return nodes
==============================
FILE: .\backend\rag\retrieval.py
==============================
from typing import List, Dict, Any
from backend.vectorstore.faiss_store import get_faiss_store
from backend.vectorstore.bm25_store import BM25Store
from backend.rag.llama_config import get_llama_retriever # Gi·∫£ ƒë·ªãnh import t·ª´ project tree

# C·∫•u h√¨nh c·ªë ƒë·ªãnh theo SPEC
THRESHOLD = 0.2
TOP_K_RETRIEVAL = 10
TOP_K_FINAL = 5

def normalize_scores(scores: List[float]) -> List[float]:
    """Min-Max Normalization to [0, 1] range."""
    if not scores: return []
    min_s, max_s = min(scores), max(scores)
    if max_s == min_s: return [1.0 for _ in scores] if max_s > 0 else [0.0 for _ in scores]
    return [(s - min_s) / (max_s - min_s) for s in scores]

def hybrid_search(query: str, course_id: str, k: int = TOP_K_FINAL) -> List[Dict[str, Any]]:
    """
    FIXED Hybrid Search: Vector (LlamaIndex) + BM25.
    Tu√¢n th·ªß: Chunk Boundary Dedup, No Python hash(), Strict Metadata, Refusal Logic.
    """
    if not query or not query.strip():
        return []

    # 1. Vector Retrieval
    vector_retriever = get_llama_retriever(course_id, top_k=TOP_K_RETRIEVAL)
    vector_nodes = []
    if vector_retriever:
        try:
            vector_nodes = vector_retriever.retrieve(query)
        except Exception:
            vector_nodes = []

    # 2. BM25 Retrieval
    bm25_store = BM25Store.load(course_id)
    bm25_docs = []
    if bm25_store:
        bm25_docs = bm25_store.search(query, k=TOP_K_RETRIEVAL)

    # 3. Score Normalization
    v_scores = normalize_scores([n.score for n in vector_nodes])
    b_scores = normalize_scores([d.get("score", 0.0) for d in bm25_docs])

    # 4. Weighted Fusion & Strict Logic
    # D√πng dictionary ƒë·ªÉ dedup theo CHUNK BOUNDARY
    # key = doc_id | page | line_start | line_end
    fused_map = {}

    # Fusion rules: 0.6 Vector / 0.4 BM25
    
    # Process Vector Results
    for i, node in enumerate(vector_nodes):
        meta = node.metadata
        # 5. Metadata Validation (Drop if missing)
        required = ["doc_id", "page", "line_start", "line_end", "file_name"]
        if not all(meta.get(f) is not None for f in required):
            continue
            
        # 1. Dedup theo Chunk Boundary (No Python hash)
        chunk_id = f"{meta['doc_id']}_{meta['page']}_{meta['line_start']}_{meta['line_end']}"
        
        if chunk_id not in fused_map:
            # 4. Flatten Metadata Output Schema
            fused_map[chunk_id] = {
                "text": node.text,
                "doc_id": meta["doc_id"],
                "page": meta["page"],
                "line_start": meta["line_start"],
                "line_end": meta["line_end"],
                "file_name": meta["file_name"],
                "final_score": 0.0
            }
        fused_map[chunk_id]["final_score"] += v_scores[i] * 0.6

    # Process BM25 Results
    for i, doc in enumerate(bm25_docs):
        meta = doc.get("metadata", {})
        if not all(meta.get(f) is not None for f in required):
            continue
            
        chunk_id = f"{meta['doc_id']}_{meta['page']}_{meta['line_start']}_{meta['line_end']}"
        
        if chunk_id not in fused_map:
            fused_map[chunk_id] = {
                "text": doc.get("text", ""),
                "doc_id": meta["doc_id"],
                "page": meta["page"],
                "line_start": meta["line_start"],
                "line_end": meta["line_end"],
                "file_name": meta["file_name"],
                "final_score": 0.0
            }
        fused_map[chunk_id]["final_score"] += b_scores[i] * 0.4

    # 3. Refusal Logic (Threshold & Empty check)
    final_list = [
        res for res in fused_map.values() 
        if res["final_score"] >= THRESHOLD
    ]
    
    if not final_list:
        return []

    # Sort & Return top K
    final_list.sort(key=lambda x: x["final_score"], reverse=True)
    return final_list[:k]
==============================
FILE: .\backend\rag\__init__.py
==============================

==============================
FILE: .\backend\utils\citation.py
==============================
def format_apa(source: dict) -> str:
    """
    APA 7th basic format
    """
    author = "Unknown"
    year = "n.d."
    title = source.get("source_file", "Unknown document")
    page = source.get("page")

    page_part = f" (p. {page})" if page is not None else ""

    return f"{author} ({year}). {title}{page_part}."


def format_ieee(source: dict, index: int) -> str:
    """
    IEEE basic format
    """
    title = source.get("source_file", "Unknown document")
    page = source.get("page")

    page_part = f", p. {page}" if page is not None else ""

    return f"[{index}] {title}{page_part}."

==============================
FILE: .\backend\utils\ocr.py
==============================
import logging
import numpy as np
from paddleocr import PaddleOCR

logger = logging.getLogger(__name__)

_ocr_engine = None

def get_ocr_engine():
    global _ocr_engine
    if _ocr_engine is None:
        # lang='vi' h·ªó tr·ª£ ti·∫øng Vi·ªát, use_angle_cls ƒë·ªÉ xoay ·∫£nh nghi√™ng
        _ocr_engine = PaddleOCR(use_angle_cls=True, lang='vi', show_log=False)
    return _ocr_engine

def ocr_image(image_obj) -> str:
    """
    OCR ·∫£nh PIL. Tr·∫£ v·ªÅ text ho·∫∑c None n·∫øu l·ªói.
    """
    try:
        ocr = get_ocr_engine()
        # Chuy·ªÉn PIL Image sang numpy array
        img_np = np.array(image_obj)
        result = ocr.ocr(img_np, cls=True)
        
        lines = []
        if result and result[0]:
            lines = [line[1][0] for line in result[0]]
        
        return "\n".join(lines)
    except Exception as e:
        logger.error(f"‚ùå OCR Internal Error: {e}")
        return None
==============================
FILE: .\backend\utils\text_extraction.py
==============================
import logging
import os
from pathlib import Path
from typing import List, Dict, Any

from pypdf import PdfReader
from pdf2image import convert_from_path
from docx import Document as DocxDocument

# Import module OCR ƒë√£ c√≥ s·∫µn trong h·ªá th·ªëng
from backend.utils.ocr import ocr_image

# C·∫•u h√¨nh Logger
logger = logging.getLogger(__name__)

# Ng∆∞·ª°ng k√Ω t·ª± trung b√¨nh m·ªói trang ƒë·ªÉ quy·∫øt ƒë·ªãnh d√πng OCR
# N·∫øu pypdf l·∫•y ƒë∆∞·ª£c √≠t h∆°n s·ªë n√†y, coi l√† file scan
TEXT_DENSITY_THRESHOLD = 50 


def extract_text(file_path: str) -> List[Dict[str, Any]]:
    """
    H√†m entry point duy nh·∫•t ƒë·ªÉ tr√≠ch xu·∫•t vƒÉn b·∫£n.
    
    Args:
        file_path (str): ƒê∆∞·ªùng d·∫´n t·ªõi file c·∫ßn x·ª≠ l√Ω.
        
    Returns:
        List[Dict]: Danh s√°ch c√°c trang vƒÉn b·∫£n v·ªõi ƒë·ªãnh d·∫°ng th·ªëng nh·∫•t:
        [
            {
                "page": int,      # S·ªë trang (b·∫Øt ƒë·∫ßu t·ª´ 1)
                "text": str,      # N·ªôi dung vƒÉn b·∫£n th√¥
                "source": str     # C√¥ng c·ª• tr√≠ch xu·∫•t ('pypdf', 'paddle_ocr', 'docx', 'text')
            },
            ...
        ]
    """
    if not os.path.exists(file_path):
        raise FileNotFoundError(f"File not found: {file_path}")

    ext = Path(file_path).suffix.lower()

    try:
        if ext == ".pdf":
            return _process_pdf(file_path)
        elif ext == ".docx":
            return _process_docx(file_path)
        elif ext in [".txt", ".md"]:
            return _process_plain_text(file_path)
        else:
            logger.warning(f"Unsupported file type: {ext}")
            return []
    except Exception as e:
        logger.error(f"Error extracting text from {file_path}: {e}")
        return []


def _process_pdf(file_path: str) -> List[Dict[str, Any]]:
    """
    X·ª≠ l√Ω PDF: T·ª± ƒë·ªông ph√°t hi·ªán PDF vƒÉn b·∫£n hay PDF scan.
    """
    # 1. Th·ª≠ tr√≠ch xu·∫•t b·∫±ng pypdf (nhanh)
    extracted_pages = _extract_pdf_text_pypdf(file_path)

    # 2. T√≠nh to√°n m·∫≠t ƒë·ªô vƒÉn b·∫£n ƒë·ªÉ ph√°t hi·ªán scan
    total_chars = sum(len(p["text"].strip()) for p in extracted_pages)
    num_pages = len(extracted_pages) if extracted_pages else 1
    avg_chars = total_chars / num_pages

    # 3. N·∫øu m·∫≠t ƒë·ªô vƒÉn b·∫£n qu√° th·∫•p, chuy·ªÉn sang ch·∫ø ƒë·ªô OCR
    if avg_chars < TEXT_DENSITY_THRESHOLD:
        logger.info(f"PDF density low ({avg_chars:.2f} chars/page). Switching to OCR mode.")
        return _extract_pdf_ocr(file_path)
    
    logger.info("PDF text extraction successful using pypdf.")
    return extracted_pages


def _extract_pdf_text_pypdf(file_path: str) -> List[Dict[str, Any]]:
    """
    Tr√≠ch xu·∫•t text t·ª´ PDF d·∫°ng text-based b·∫±ng pypdf.
    """
    results = []
    try:
        reader = PdfReader(file_path)
        for i, page in enumerate(reader.pages):
            text = page.extract_text() or ""
            results.append({
                "page": i + 1,
                "text": text,
                "source": "pypdf"
            })
    except Exception as e:
        logger.error(f"pypdf extraction failed: {e}")
        # Tr·∫£ v·ªÅ list r·ªóng ƒë·ªÉ logic ch√≠nh quy·∫øt ƒë·ªãnh fallback ho·∫∑c d·ª´ng
        return []
    
    return results


def _extract_pdf_ocr(file_path: str) -> List[Dict[str, Any]]:
    """
    Tr√≠ch xu·∫•t text t·ª´ PDF d·∫°ng scan b·∫±ng c√°ch chuy·ªÉn sang ·∫£nh v√† d√πng PaddleOCR.
    """
    results = []
    try:
        # Chuy·ªÉn PDF th√†nh danh s√°ch ·∫£nh (PIL Images)
        # L∆∞u √Ω: poppler ph·∫£i ƒë∆∞·ª£c c√†i ƒë·∫∑t trong m√¥i tr∆∞·ªùng (docker/system)
        images = convert_from_path(file_path)
        
        for i, image in enumerate(images):
            # G·ªçi h√†m ocr_image t·ª´ module ocr.py c√≥ s·∫µn
            text = ocr_image(image) or ""
            
            results.append({
                "page": i + 1,
                "text": text,
                "source": "paddle_ocr"
            })
            
    except Exception as e:
        logger.error(f"OCR extraction failed: {e}")
        # N·∫øu l·ªói convert ·∫£nh ho·∫∑c OCR, tr·∫£ v·ªÅ list r·ªóng ho·∫∑c l·ªói c·ª•c b·ªô
        return []

    return results


def _process_docx(file_path: str) -> List[Dict[str, Any]]:
    """
    X·ª≠ l√Ω file DOCX.
    DOCX kh√¥ng c√≥ kh√°i ni·ªám 'trang' c·ª©ng nh∆∞ PDF, ta g·ªôp to√†n b·ªô v√†o page 1 
    ho·∫∑c c√≥ th·ªÉ t√°ch theo section n·∫øu c·∫ßn thi·∫øt sau n√†y.
    """
    try:
        doc = DocxDocument(file_path)
        full_text = "\n".join([p.text for p in doc.paragraphs])
        return [{
            "page": 1,
            "text": full_text,
            "source": "docx"
        }]
    except Exception as e:
        logger.error(f"DOCX extraction failed: {e}")
        return []


def _process_plain_text(file_path: str) -> List[Dict[str, Any]]:
    """
    X·ª≠ l√Ω file TXT/MD.
    """
    try:
        with open(file_path, "r", encoding="utf-8", errors="ignore") as f:
            content = f.read()
        return [{
            "page": 1,
            "text": content,
            "source": "text"
        }]
    except Exception as e:
        logger.error(f"Text file extraction failed: {e}")
        return []
==============================
FILE: .\backend\vectorstore\bm25_store.py
==============================
import pickle
from pathlib import Path
from typing import List, Tuple
from rank_bm25 import BM25Okapi
from langchain_core.documents import Document

class BM25Store:
    def __init__(self, course_id: str):
        self.course_id = course_id
        self.documents: List[Document] = []
        self.corpus = []
        self.bm25 = None
        self.storage_path = Path(f"data/bm25_{course_id}.pkl") # T√°ch bi·ªát theo course [cite: 82]

    def add_documents(self, docs: List[Document]):
        for doc in docs:
            tokens = doc.page_content.lower().split()
            self.documents.append(doc)
            self.corpus.append(tokens)
        self.bm25 = BM25Okapi(self.corpus)

    def search(self, query: str, k: int = 5) -> List[Tuple[Document, float]]:
        if not self.bm25:
            return []
        query_tokens = query.lower().split()
        scores = self.bm25.get_scores(query_tokens)
        ranked = sorted(enumerate(scores), key=lambda x: x[1], reverse=True)[:k]
        return [(self.documents[idx], score) for idx, score in ranked if score > 0]

    def save(self):
        self.storage_path.parent.mkdir(parents=True, exist_ok=True)
        with open(self.storage_path, "wb") as f:
            pickle.dump(self, f)

    @classmethod
    def load(cls, course_id: str):
        """
        FIX: Tr·∫£ v·ªÅ m·ªôt instance ƒë√£ load d·ªØ li·ªáu thay v√¨ instance tr·ªëng 
        """
        instance = cls(course_id)
        if instance.storage_path.exists():
            with open(instance.storage_path, "rb") as f:
                loaded_data = pickle.load(f)
                instance.documents = loaded_data.documents
                instance.corpus = loaded_data.corpus
                instance.bm25 = loaded_data.bm25
        return instance
==============================
FILE: .\backend\vectorstore\faiss_store.py
==============================
import os
from langchain_huggingface import HuggingFaceEmbeddings
from langchain_community.vectorstores import FAISS

# S·ª≠ d·ª•ng model nh·ªè ƒë·ªÉ ti·∫øt ki·ªám RAM
EMBEDDING_MODEL_NAME = "sentence-transformers/all-MiniLM-L6-v2"

# Kh·ªüi t·∫°o singleton ƒë·ªÉ d√πng chung to√†n h·ªá th·ªëng, tr√°nh t·ªën RAM [cite: 99]
embeddings_instance = HuggingFaceEmbeddings(model_name=EMBEDDING_MODEL_NAME)

def get_faiss_store(index_path: str):
    """
    Load FAISS store t·ª´ ƒëƒ©a n·∫øu t·ªìn t·∫°i, n·∫øu kh√¥ng tr·∫£ v·ªÅ None [cite: 99]
    """
    if os.path.exists(os.path.join(index_path, "index.faiss")):
        return FAISS.load_local(
            index_path, 
            embeddings_instance, 
            allow_dangerous_deserialization=True
        )
    return None
==============================
FILE: .\data\llama_index\TEST_COURSE_V1\default__vector_store.json
==============================
IxF2                                  ß+='k/2y=X<Z=x<”åu'>`Sm':
-]5ﬁº%=R;m;(S=(|;jQSL2Y@>NlQ={=A 5=$=x;osCj6q=<=3 ; U<Êòød=c[<'JH<k<'<xMU=BL>/≈®Ix2=l!:n&<b	WÈΩõ@=j0=9h<W<ﬁ∑qY&Q9^=s=0mW;TG,÷ÉJ<4;GÀÉ=s:=2	;r:=TH=%q&=\3I<?i=H=n<[Z<◊ä=K =iD$xu=e}b=W	<Sﬂ≥<m>Œ¢%*<XzF^v-=x.]<y*n0Oj>ƒª	mk;3Ns>:|=7\«ã sS÷Ω5JL<K"ƒΩF#EN<V=f};◊º+%=EsE<*>=c$=
=8=<QÚ∂ΩÆ&<&L=zS+=s\xÀª_lc{LR'b=9Ôº∫><Q=5$=X<Ap'<qQS<e=X9Y<1|<,<a`=
,:O;Z=W=<!<÷ù<R=8Gv…º-7=	%0	=@Àé	n=~]<;W`…ºy(—Ç2r%cN<N<`M<}<0’™<"\=ŒªKt,;"<“â=O=(=ÿ∫<@=+	CP=dB':h=8Ra=(E[=}k973<
<
Õô={-"<^Uj=LS=GGY=5
jP<
s=W-iO>∆ú==.…ªm%=Ue<cq8_Ìâº
<=t<2tB
;b¬Ω/ÂΩ∫À∫Ï•éQ=b`÷îd=-=s-=7Pqa=<:2='n,~?=|›ùxx<N~(=/"ÕΩmM“ùs=Y@M;o*xz<‰õ´e;xK<~`<!=0LÁ≤É'i0mk+=Am=|<Hq=◊±1<h;<hq=w=bho
>)=cO*<<Y=e^>0 =0=j9@=;=N:+ﬁ°a=&=Œ∞;*_<]r’ø=i=F(<v`<L.<·®Ω\)m=Í†º3wU.#Gu=Ps#U=<hÿºWV<9<E=Z<sm'–º@<)Bu—ê;Jg^==IG<=P<>&<~e’ì<myD å=<ld=8WW=ÈàΩU<=R<Udf<QD=[=lN‘Ä=g=*Y&U=_wa<DXB;5=L==;f;i =pYAVEor!2=Rr)<<
cR=<:V=<›®HU=;
€£R~*<`v=≈©/;=‹ΩqS; O<{√º	=ge\:=»º$,j;;Ô≥´S=<„åïG<<-<P<"]=I=chD0kb>=EO2=<q@!<&cZ<<√û8=,œºœªl=
ZNN@v
[={q=Àó	=Ql;!=e=Diu#=e<u;4%~:'Y =>==q%=Õº1=`"[<€à0=m=D=<NJ=ŒÇs#t◊Ωy=g=Iao~<c–Ω\=9^Jm
k=z m<i|<;&u>#77 ∫7Lƒª–ΩD&<:<A;VkÃºR=\t/
A`=Ëàà^8c<b43<*Bvf=<}<kwT<9&.;3{Z<p393=dt=(Ÿªh_1”™zs=BnC0=P<BF=#«â5iS2=:€Å_s<=Z).=@Kd`Dz'=!p"=M"==*Q;m{oŸé'b=cS`=S]=w<=9	=q*="cS^:s∆Ω<$O=@M=^DÍºÑ=›∫:k=Œë<`;<\Ëûªyl;BhI=x∆ºIh=<r:yC}[,lo=ATX⁄ºa=;p>;S<≈ï=FbJu
g7 ‹º&q}<4=7<8 ê=ÿ≥n;w;O=e<-<=9.k=y<:A$t=G⁄≤;:)2IKS<XS=bj	o=¬∞<Ne<=⁄ΩD=IO<a=_<O_=iﬂΩ=eA/*=2¬ΩlT=
4A<i@U=s;=	%3!4<=Q ⁄ª==[=b=pvg=	%=RU\k
m<Ea	«¶l#b<~`@=f?="=	M÷º6Zfgn}=v=8Mt'*t@{.<=;A›Ü=gyA= :;="=A‘ªgR:qYXq<$o÷çi=<<C*Z=Lp;fg=)=„µºÃû=DS=GV =€ô=_D"<G<*F|p==ﬂ´»Ü<”éi;9=VG{v&xAG< úx<F;ii$7;mppleU<N<W<#>«í=`^Ua=(’ª3<I	7=<=1	>C;W-;S =-|<+=WJ=Á£†)Yxi=M9=}e=y
1=DVi=8=i9=‘ñ=≈º0=b=!<a Ω@|=_”ºph!UT ,j;@*∆ΩW|=#k$<h;<HIﬂå=]zPj/	z, =OjK=%L=F:4;W#<_ÎûΩn<6]YA=t›Ø“º+,Àº]v=DV/bz	C<P.=E Y=8q»ΩHF=m
=&]j
<B;œΩMC=M4<tq'k<{C=\=Z;.&=:I?<y<;~sf=Q;$9D%=V2NMO:Qo=¬æ<]qJJ=Q="1÷ç<%'	`
»º'3j<O=I—º}EQ=¬Ω	<
)ÕΩ)2d=	X</B(Jb@=P\=2Õ¶œºƒºÃª=÷çt<viÿ∂#=7>ÿø".J#D><L2W<==@9=j<s< ≤n=lM={P=	@<=h‰é´rA=ÿ≤T>Y6==“º;u===p<X:<m<B’ºH=)(N€©<U#=;^VZ!!9B,P}'=WÀù9Ko=<BN?:nre{;!<=%<vk<<=jZ{T'(ﬁàW<==∆´=nL8=<<y =yÿº>
]=#…≤|‡ª∑…Ωm9F|g^K+⁄ºÕõ
NR{<+“∑Õº.1DP<=<?=V<0D.=X==Z`;="}==»¢==f5f.<>=n=o;w<=:*K=
:#OVZb=y
+;ﬁªwÃΩ_<=<W;U DU=&<t<ÀªX;ttl==<Õâ5‹Ω=hqÀº{. a;YÂ∏è={<>=<V=dYUC}jA=ÍöΩ^~=F;j'XV<Ãë
= ∆º$=k<’öp ªk=CM=|YLÔº≠A;F;HWM=]@<<_G#<^&Ó∑Ω}=:o^T=œÑ@54rI=cﬂå=o=;L9]1=i;
u=:m(;rV.r#<~<]x== ÷ó-<{+/Ra`<}w<ŒΩE%c<O`}<Ln<=86=GK<$'8=t-=_riHK<t<5=/Z=z8=E=Dr<<[t\=Y<≈©<="~==4(^<7<"m{5Âê∫}<»Ω&D=N."=T<=F;=z1’Ö:!V0'ÎΩÇ—∫;tq<(=L-<NW"=b9P=d`qY==`Hl<Vj=&=9
m?=Z^vC:b’ìE=BF'<√ø7>KN<#u:x=c0=<Wcr=*f^;ca<6Q;9vr07<œªb;91ÿ°0^(>*-M;T=<-<v~|À∞=*~<.xN=<3j<&DCXG2== ^=d('>Q[=jc@;q),<PS=FRÔÄº(›ä6R$</Mq<==8"ﬁºi>	1=(z!ﬁº$yj=<`=Á†û=H÷∫<k<»ÖﬂΩc<Õ£;–Ä;O&==5"=<P"VC#VUt};x&;n6=Dd<I =._)Â™ΩU,pW'h=Z<L=M3—ä=(=:l;;-e,<Ny<<!!T…Ω-lS<=_+<!<RRyb<®áºG=$=vXI=G=G{<G<a|=R=Nw`qaxR<;<\=p+·ºΩ‚íªTH<fn=^%=<8ƒºh<d=œΩt@}€º;k?;Guq=
.=I9=*=oX=;F-W=i=(sÈ¨∑<`f=/PG"i&=l—ºrrÓΩä<<<r[ﬂºoX=+r\l?=]6<=/B=;+=6*”ø<^sO=w<=Ò®Ω¥=Q|<Jb<N\=q=<J	G<=6=sI=/
==============================
FILE: .\data\llama_index\TEST_COURSE_V1\docstore.json
==============================
{"docstore/data": {"f163e0ffe970240f4ce54d57058a3d0eb74625e98ec4e015566495cf4e55afa5": {"__data__": {"id_": "f163e0ffe970240f4ce54d57058a3d0eb74625e98ec4e015566495cf4e55afa5", "embedding": null, "metadata": {"doc_id": "TEST_DOC_1", "file_name": "test_file.txt", "page": 1, "line_start": 1, "line_end": 5, "source": "unknown", "content_hash": "f163e0ffe970240f4ce54d57058a3d0eb74625e98ec4e015566495cf4e55afa5", "ingest_time": "2026-01-29T18:07:04.769051", "index_version": "v1.0", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2"}, "excluded_embed_metadata_keys": ["ingest_time", "index_version", "content_hash", "line_start", "line_end", "embedding_model", "doc_id", "page", "file_name", "source"], "excluded_llm_metadata_keys": ["content_hash", "index_version", "embedding_model", "ingest_time", "doc_id"], "relationships": {}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Ki\u1ebfn tr\u00fac RAG bao g\u1ed3m Retrieval v\u00e0 Generation. \u0110\u00e2y l\u00e0 test chunk s\u1ed1 1.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d31399fc889926824565528c8d2f6b629d715e674156dfc245c26dce1d248bb0": {"__data__": {"id_": "d31399fc889926824565528c8d2f6b629d715e674156dfc245c26dce1d248bb0", "embedding": null, "metadata": {"doc_id": "TEST_DOC_1", "file_name": "test_file.txt", "page": 1, "line_start": 6, "line_end": 10, "source": "unknown", "content_hash": "d31399fc889926824565528c8d2f6b629d715e674156dfc245c26dce1d248bb0", "ingest_time": "2026-01-29T18:07:04.769051", "index_version": "v1.0", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2"}, "excluded_embed_metadata_keys": ["ingest_time", "index_version", "content_hash", "line_start", "line_end", "embedding_model", "doc_id", "page", "file_name", "source"], "excluded_llm_metadata_keys": ["content_hash", "index_version", "embedding_model", "ingest_time", "doc_id"], "relationships": {}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "LlamaIndex gi\u00fap qu\u1ea3n l\u00fd d\u1eef li\u1ec7u cho LLM. \u0110\u00e2y l\u00e0 test chunk s\u1ed1 2.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d3bb09c48113c392387d0528e2a6ab3bfa532a487bd67da6ca9735b483a9829e": {"__data__": {"id_": "d3bb09c48113c392387d0528e2a6ab3bfa532a487bd67da6ca9735b483a9829e", "embedding": null, "metadata": {"doc_id": "TEST_DOC_1", "file_name": "test_file.txt", "page": 2, "line_start": 1, "line_end": 4, "source": "unknown", "content_hash": "d3bb09c48113c392387d0528e2a6ab3bfa532a487bd67da6ca9735b483a9829e", "ingest_time": "2026-01-29T18:07:04.769051", "index_version": "v1.0", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2"}, "excluded_embed_metadata_keys": ["ingest_time", "index_version", "content_hash", "line_start", "line_end", "embedding_model", "doc_id", "page", "file_name", "source"], "excluded_llm_metadata_keys": ["content_hash", "index_version", "embedding_model", "ingest_time", "doc_id"], "relationships": {}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Embedding model chuy\u1ec3n text th\u00e0nh vector. \u0110\u00e2y l\u00e0 test chunk s\u1ed1 3.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a35ed5c38d8aaf71e1830d2e851b854aea37d1392ffecc9ff01a6a3a84516584": {"__data__": {"id_": "a35ed5c38d8aaf71e1830d2e851b854aea37d1392ffecc9ff01a6a3a84516584", "embedding": null, "metadata": {"doc_id": "TEST_DOC_2", "file_name": "test_file_2.txt", "page": 99, "line_start": 1, "line_end": 1, "source": "unknown", "content_hash": "a35ed5c38d8aaf71e1830d2e851b854aea37d1392ffecc9ff01a6a3a84516584", "ingest_time": "2026-01-29T18:07:12.146660", "index_version": "v1.0", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2"}, "excluded_embed_metadata_keys": ["ingest_time", "index_version", "content_hash", "line_start", "line_end", "embedding_model", "doc_id", "page", "file_name", "source"], "excluded_llm_metadata_keys": ["content_hash", "index_version", "embedding_model", "ingest_time", "doc_id"], "relationships": {}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\u0110\u00e2y l\u00e0 chunk ho\u00e0n to\u00e0n m\u1edbi.", "mimetype": "text/plain", "start_char_idx": null, "end_char_idx": null, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/metadata": {"f163e0ffe970240f4ce54d57058a3d0eb74625e98ec4e015566495cf4e55afa5": {"doc_hash": "bfcd84ac1b55425f38e8c89742db1506e31ac3ae81faafee5d3afb80acbfb685"}, "d31399fc889926824565528c8d2f6b629d715e674156dfc245c26dce1d248bb0": {"doc_hash": "213b38ec10e59dc33a1c3db8a48885b030484427c3126a1a878214c4f79ac406"}, "d3bb09c48113c392387d0528e2a6ab3bfa532a487bd67da6ca9735b483a9829e": {"doc_hash": "8a9056ff29fdf98b68d9ebf682159b5804c6f5b066e6a8b51c64049a2f12e0c2"}, "a35ed5c38d8aaf71e1830d2e851b854aea37d1392ffecc9ff01a6a3a84516584": {"doc_hash": "97fd8270122e82a462739cc93a82c104da7300005f1936f3672dd2563b62c2c6"}}}
==============================
FILE: .\data\llama_index\TEST_COURSE_V1\graph_store.json
==============================
{"graph_dict": {}}
==============================
FILE: .\data\llama_index\TEST_COURSE_V1\image__vector_store.json
==============================
{"embedding_dict": {}, "text_id_to_ref_doc_id": {}, "metadata_dict": {}}
==============================
FILE: .\data\llama_index\TEST_COURSE_V1\index_store.json
==============================
{"index_store/data": {"f2355889-67a9-4192-a465-c8ec4404fa9a": {"__type__": "vector_store", "__data__": "{\"index_id\": \"f2355889-67a9-4192-a465-c8ec4404fa9a\", \"summary\": null, \"nodes_dict\": {\"0\": \"f163e0ffe970240f4ce54d57058a3d0eb74625e98ec4e015566495cf4e55afa5\", \"1\": \"d31399fc889926824565528c8d2f6b629d715e674156dfc245c26dce1d248bb0\", \"2\": \"d3bb09c48113c392387d0528e2a6ab3bfa532a487bd67da6ca9735b483a9829e\", \"3\": \"a35ed5c38d8aaf71e1830d2e851b854aea37d1392ffecc9ff01a6a3a84516584\"}, \"doc_id_dict\": {}, \"embeddings_dict\": {}}"}}}
==============================
FILE: .\frontend\index.html
==============================
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AI Tr·ª£ Gi·∫£ng</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

==============================
FILE: .\frontend\package-lock.json
==============================
{
  "name": "ai-trogiang-frontend",
  "version": "0.1.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "ai-trogiang-frontend",
      "version": "0.1.0",
      "dependencies": {
        "axios": "^1.6.0",
        "react": "^18.2.0",
        "react-dom": "^18.2.0"
      },
      "devDependencies": {
        "@vitejs/plugin-react": "^4.0.0",
        "vite": "^5.0.0"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.28.6.tgz",
      "integrity": "sha512-JYgintcMjRiCvS8mMECzaEn+m3PfoQiyqukOMCCVQtoJGYJw8j/8LBJEiqkHLkfwCcs74E3pbAUFNg7d9VNJ+Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.28.5",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.6.tgz",
      "integrity": "sha512-2lfu57JtzctfIrcGMz992hyLlByuzgIk58+hhGCxjKZ3rWI82NnVLjXcaTqkI2NvlcvOskZaiZ5kjUALo3Lpxg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.6.tgz",
      "integrity": "sha512-H3mcG6ZDLTlYfaSNi0iOKkigqMFvkTKlGUYlD8GW7nNOYRrevuA46iTypPyv+06V3fEmvvazfntkBU34L0azAw==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@babel/code-frame": "^7.28.6",
        "@babel/generator": "^7.28.6",
        "@babel/helper-compilation-targets": "^7.28.6",
        "@babel/helper-module-transforms": "^7.28.6",
        "@babel/helpers": "^7.28.6",
        "@babel/parser": "^7.28.6",
        "@babel/template": "^7.28.6",
        "@babel/traverse": "^7.28.6",
        "@babel/types": "^7.28.6",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.6.tgz",
      "integrity": "sha512-lOoVRwADj8hjf7al89tvQ2a1lf53Z+7tiXMgpZJL3maQPDxh0DgLMN62B2MKUOFcoodBHLMbDM6WAbKgNy5Suw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.6",
        "@babel/types": "^7.28.6",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.28.6.tgz",
      "integrity": "sha512-JYtls3hqi15fcx5GaSNL7SCTJ2MNmjrkHXg4FSpOA/grxK8KwyZ5bubHsCq8FXCkua6xhuaaBit+3b7+VZRfcA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.28.6",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.28.6.tgz",
      "integrity": "sha512-l5XkZK7r7wa9LucGw9LwZyyCUscb4x37JWTPz7swwFE/0FMQAGpiWUZn8u9DzkSBWEcK25jmvubfpw2dnAMdbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.28.6",
        "@babel/types": "^7.28.6"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.6.tgz",
      "integrity": "sha512-67oXFAYr2cDLDVGLXTEABjdBJZ6drElUSI7WKp70NrpyISso3plG9SAGEF6y7zbha/wOzUByWWTJvEDVNIUGcA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.28.6",
        "@babel/helper-validator-identifier": "^7.28.5",
        "@babel/traverse": "^7.28.6"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.28.6.tgz",
      "integrity": "sha512-S9gzZ/bz83GRysI7gAD4wPT/AI3uCnY+9xn+Mx/KPs2JwHJIz1W8PZkg2cqyt3RNOBM8ejcXhV6y8Og7ly/Dug==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.6.tgz",
      "integrity": "sha512-xOBvwq86HHdB7WUDTfKfT/Vuxh7gElQ+Sfti2Cy6yIWNW05P8iUslOVcZ4/sKbE+/jQaukQAdz/gf3724kYdqw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.28.6",
        "@babel/types": "^7.28.6"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.6.tgz",
      "integrity": "sha512-TeR9zWR18BvbfPmGbLampPMW+uW1NZnJlRuuHso8i87QZNq2JRF9i6RgxRqtEq+wQGsS19NNTWr2duhnE49mfQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.6"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.28.6.tgz",
      "integrity": "sha512-YA6Ma2KsCdGb+WC6UpBVFJGXL58MDA6oyONbjyF/+5sBgxY/dwkhLogbMT2GXXyU84/IhRw/2D1Os1B/giz+BQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.28.6",
        "@babel/parser": "^7.28.6",
        "@babel/types": "^7.28.6"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.6.tgz",
      "integrity": "sha512-fgWX62k02qtjqdSNTAGxmKYY/7FSL9WAS1o2Hu5+I5m9T0yxZzr4cnrfXQ/MX0rIifthCSs6FKTlzYbJcPtMNg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.28.6",
        "@babel/generator": "^7.28.6",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.6",
        "@babel/template": "^7.28.6",
        "@babel/types": "^7.28.6",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.6.tgz",
      "integrity": "sha512-0ZrskXVEHSWIqZM/sQZ4EV3jZJXRkio/WCxaqKZP1g//CEWEPSfeZFcms4XeKBCHU0ZKnIkdJeU/kF+eRp5lBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.21.5.tgz",
      "integrity": "sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.21.5.tgz",
      "integrity": "sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.21.5.tgz",
      "integrity": "sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.21.5.tgz",
      "integrity": "sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.21.5.tgz",
      "integrity": "sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.21.5.tgz",
      "integrity": "sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.21.5.tgz",
      "integrity": "sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.21.5.tgz",
      "integrity": "sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.21.5.tgz",
      "integrity": "sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.21.5.tgz",
      "integrity": "sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.21.5.tgz",
      "integrity": "sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.21.5.tgz",
      "integrity": "sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.21.5.tgz",
      "integrity": "sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.21.5.tgz",
      "integrity": "sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.21.5.tgz",
      "integrity": "sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.21.5.tgz",
      "integrity": "sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.21.5.tgz",
      "integrity": "sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.21.5.tgz",
      "integrity": "sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.21.5.tgz",
      "integrity": "sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.21.5.tgz",
      "integrity": "sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.21.5.tgz",
      "integrity": "sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.21.5.tgz",
      "integrity": "sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.21.5.tgz",
      "integrity": "sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.27",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.27.tgz",
      "integrity": "sha512-+d0F4MKMCbeVUJwG96uQ4SgAznZNSq93I3V+9NHA4OpvqG8mRCpGdKmK8l/dl02h2CCDHwW2FqilnTyDcAnqjA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.56.0.tgz",
      "integrity": "sha512-LNKIPA5k8PF1+jAFomGe3qN3bbIgJe/IlpDBwuVjrDKrJhVWywgnJvflMt/zkbVNLFtF1+94SljYQS6e99klnw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.56.0.tgz",
      "integrity": "sha512-lfbVUbelYqXlYiU/HApNMJzT1E87UPGvzveGg2h0ktUNlOCxKlWuJ9jtfvs1sKHdwU4fzY7Pl8sAl49/XaEk6Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.56.0.tgz",
      "integrity": "sha512-EgxD1ocWfhoD6xSOeEEwyE7tDvwTgZc8Bss7wCWe+uc7wO8G34HHCUH+Q6cHqJubxIAnQzAsyUsClt0yFLu06w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.56.0.tgz",
      "integrity": "sha512-1vXe1vcMOssb/hOF8iv52A7feWW2xnu+c8BV4t1F//m9QVLTfNVpEdja5ia762j/UEJe2Z1jAmEqZAK42tVW3g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.56.0.tgz",
      "integrity": "sha512-bof7fbIlvqsyv/DtaXSck4VYQ9lPtoWNFCB/JY4snlFuJREXfZnm+Ej6yaCHfQvofJDXLDMTVxWscVSuQvVWUQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.56.0.tgz",
      "integrity": "sha512-KNa6lYHloW+7lTEkYGa37fpvPq+NKG/EHKM8+G/g9WDU7ls4sMqbVRV78J6LdNuVaeeK5WB9/9VAFbKxcbXKYg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.56.0.tgz",
      "integrity": "sha512-E8jKK87uOvLrrLN28jnAAAChNq5LeCd2mGgZF+fGF5D507WlG/Noct3lP/QzQ6MrqJ5BCKNwI9ipADB6jyiq2A==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.56.0.tgz",
      "integrity": "sha512-jQosa5FMYF5Z6prEpTCCmzCXz6eKr/tCBssSmQGEeozA9tkRUty/5Vx06ibaOP9RCrW1Pvb8yp3gvZhHwTDsJw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.56.0.tgz",
      "integrity": "sha512-uQVoKkrC1KGEV6udrdVahASIsaF8h7iLG0U0W+Xn14ucFwi6uS539PsAr24IEF9/FoDtzMeeJXJIBo5RkbNWvQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.56.0.tgz",
      "integrity": "sha512-vLZ1yJKLxhQLFKTs42RwTwa6zkGln+bnXc8ueFGMYmBTLfNu58sl5/eXyxRa2RarTkJbXl8TKPgfS6V5ijNqEA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.56.0.tgz",
      "integrity": "sha512-FWfHOCub564kSE3xJQLLIC/hbKqHSVxy8vY75/YHHzWvbJL7aYJkdgwD/xGfUlL5UV2SB7otapLrcCj2xnF1dg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-musl": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-musl/-/rollup-linux-loong64-musl-4.56.0.tgz",
      "integrity": "sha512-z1EkujxIh7nbrKL1lmIpqFTc/sr0u8Uk0zK/qIEFldbt6EDKWFk/pxFq3gYj4Bjn3aa9eEhYRlL3H8ZbPT1xvA==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.56.0.tgz",
      "integrity": "sha512-iNFTluqgdoQC7AIE8Q34R3AuPrJGJirj5wMUErxj22deOcY7XwZRaqYmB6ZKFHoVGqRcRd0mqO+845jAibKCkw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-musl": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-musl/-/rollup-linux-ppc64-musl-4.56.0.tgz",
      "integrity": "sha512-MtMeFVlD2LIKjp2sE2xM2slq3Zxf9zwVuw0jemsxvh1QOpHSsSzfNOTH9uYW9i1MXFxUSMmLpeVeUzoNOKBaWg==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.56.0.tgz",
      "integrity": "sha512-in+v6wiHdzzVhYKXIk5U74dEZHdKN9KH0Q4ANHOTvyXPG41bajYRsy7a8TPKbYPl34hU7PP7hMVHRvv/5aCSew==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.56.0.tgz",
      "integrity": "sha512-yni2raKHB8m9NQpI9fPVwN754mn6dHQSbDTwxdr9SE0ks38DTjLMMBjrwvB5+mXrX+C0npX0CVeCUcvvvD8CNQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.56.0.tgz",
      "integrity": "sha512-zhLLJx9nQPu7wezbxt2ut+CI4YlXi68ndEve16tPc/iwoylWS9B3FxpLS2PkmfYgDQtosah07Mj9E0khc3Y+vQ==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.56.0.tgz",
      "integrity": "sha512-MVC6UDp16ZSH7x4rtuJPAEoE1RwS8N4oK9DLHy3FTEdFoUTCFVzMfJl/BVJ330C+hx8FfprA5Wqx4FhZXkj2Kw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.56.0.tgz",
      "integrity": "sha512-ZhGH1eA4Qv0lxaV00azCIS1ChedK0V32952Md3FtnxSqZTBTd6tgil4nZT5cU8B+SIw3PFYkvyR4FKo2oyZIHA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openbsd-x64": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openbsd-x64/-/rollup-openbsd-x64-4.56.0.tgz",
      "integrity": "sha512-O16XcmyDeFI9879pEcmtWvD/2nyxR9mF7Gs44lf1vGGx8Vg2DRNx11aVXBEqOQhWb92WN4z7fW/q4+2NYzCbBA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.56.0.tgz",
      "integrity": "sha512-LhN/Reh+7F3RCgQIRbgw8ZMwUwyqJM+8pXNT6IIJAqm2IdKkzpCh/V9EdgOMBKuebIrzswqy4ATlrDgiOwbRcQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.56.0.tgz",
      "integrity": "sha512-kbFsOObXp3LBULg1d3JIUQMa9Kv4UitDmpS+k0tinPBz3watcUiV2/LUDMMucA6pZO3WGE27P7DsfaN54l9ing==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.56.0.tgz",
      "integrity": "sha512-vSSgny54D6P4vf2izbtFm/TcWYedw7f8eBrOiGGecyHyQB9q4Kqentjaj8hToe+995nob/Wv48pDqL5a62EWtg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.56.0.tgz",
      "integrity": "sha512-FeCnkPCTHQJFbiGG49KjV5YGW/8b9rrXAM2Mz2kiIoktq2qsJxRD5giEMEOD2lPdgs72upzefaUvS+nc8E3UzQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.56.0.tgz",
      "integrity": "sha512-H8AE9Ur/t0+1VXujj90w0HrSOuv0Nq9r1vSZF2t5km20NTfosQsGGUXDaKdQZzwuLts7IyL1fYT4hM95TI9c4g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-4.7.0.tgz",
      "integrity": "sha512-gUu9hwfWvvEDBBmgtAowQCojwZmJ5mcLn3aufeCsitijs3+f2NsrPtlAWIR6OPiqljl96GVCUbLe0HyqIpVaoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.28.0",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.27",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.17.0"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.13.2",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.13.2.tgz",
      "integrity": "sha512-VPk9ebNqPcy5lRGuSlKx752IlDatOjT9paPlm8A7yOuW2Fbvp4X3JznJtT4f0GzGLLiWE9W8onz51SqLYwzGaA==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.9.17",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.17.tgz",
      "integrity": "sha512-agD0MgJFUP/4nvjqzIB29zRPUuCF7Ge6mEv9s8dHrtYD7QWXRcx75rOADE/d5ah1NI+0vkDl0yorDd5U852IQQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.1",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "baseline-browser-mapping": "^2.9.0",
        "caniuse-lite": "^1.0.30001759",
        "electron-to-chromium": "^1.5.263",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.2.0"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001765",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001765.tgz",
      "integrity": "sha512-LWcNtSyZrakjECqmpP4qdg0MMGdN368D7X8XvvAqOcqMv0RxnlqVKZl2V6/mBR68oYMxOZPLw/gO7DuisMHUvQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.277",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.277.tgz",
      "integrity": "sha512-wKXFZw4erWmmOz5N/grBoJ2XrNJGDFMu2+W5ACHza5rHtvsqrK4gb6rnLC7XxKB9WlJ+RmyQatuEXmtm86xbnw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.21.5.tgz",
      "integrity": "sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=12"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.21.5",
        "@esbuild/android-arm": "0.21.5",
        "@esbuild/android-arm64": "0.21.5",
        "@esbuild/android-x64": "0.21.5",
        "@esbuild/darwin-arm64": "0.21.5",
        "@esbuild/darwin-x64": "0.21.5",
        "@esbuild/freebsd-arm64": "0.21.5",
        "@esbuild/freebsd-x64": "0.21.5",
        "@esbuild/linux-arm": "0.21.5",
        "@esbuild/linux-arm64": "0.21.5",
        "@esbuild/linux-ia32": "0.21.5",
        "@esbuild/linux-loong64": "0.21.5",
        "@esbuild/linux-mips64el": "0.21.5",
        "@esbuild/linux-ppc64": "0.21.5",
        "@esbuild/linux-riscv64": "0.21.5",
        "@esbuild/linux-s390x": "0.21.5",
        "@esbuild/linux-x64": "0.21.5",
        "@esbuild/netbsd-x64": "0.21.5",
        "@esbuild/openbsd-x64": "0.21.5",
        "@esbuild/sunos-x64": "0.21.5",
        "@esbuild/win32-arm64": "0.21.5",
        "@esbuild/win32-ia32": "0.21.5",
        "@esbuild/win32-x64": "0.21.5"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.5.tgz",
      "integrity": "sha512-8RipRLol37bNs2bhoV67fiTEvdTrbMUYcFTiy3+wuuOnUog2QBHCZWXDRijWQfAkhBj2Uf5UnVaiWwA5vdd82w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react/-/react-18.3.1.tgz",
      "integrity": "sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.3.1.tgz",
      "integrity": "sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.2"
      },
      "peerDependencies": {
        "react": "^18.3.1"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.17.0.tgz",
      "integrity": "sha512-z6F7K9bV85EfseRCp2bzrpyQ0Gkw1uLoCel9XBVWPg/TjRj94SkJzUTGfOa4bs7iJvBWtQG0Wq7wnI0syw3EBQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/rollup": {
      "version": "4.56.0",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.56.0.tgz",
      "integrity": "sha512-9FwVqlgUHzbXtDg9RCMgodF3Ua4Na6Gau+Sdt9vyCN4RhHfVKX2DCHy3BjMLTDd47ITDhYAnTwGulWTblJSDLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.56.0",
        "@rollup/rollup-android-arm64": "4.56.0",
        "@rollup/rollup-darwin-arm64": "4.56.0",
        "@rollup/rollup-darwin-x64": "4.56.0",
        "@rollup/rollup-freebsd-arm64": "4.56.0",
        "@rollup/rollup-freebsd-x64": "4.56.0",
        "@rollup/rollup-linux-arm-gnueabihf": "4.56.0",
        "@rollup/rollup-linux-arm-musleabihf": "4.56.0",
        "@rollup/rollup-linux-arm64-gnu": "4.56.0",
        "@rollup/rollup-linux-arm64-musl": "4.56.0",
        "@rollup/rollup-linux-loong64-gnu": "4.56.0",
        "@rollup/rollup-linux-loong64-musl": "4.56.0",
        "@rollup/rollup-linux-ppc64-gnu": "4.56.0",
        "@rollup/rollup-linux-ppc64-musl": "4.56.0",
        "@rollup/rollup-linux-riscv64-gnu": "4.56.0",
        "@rollup/rollup-linux-riscv64-musl": "4.56.0",
        "@rollup/rollup-linux-s390x-gnu": "4.56.0",
        "@rollup/rollup-linux-x64-gnu": "4.56.0",
        "@rollup/rollup-linux-x64-musl": "4.56.0",
        "@rollup/rollup-openbsd-x64": "4.56.0",
        "@rollup/rollup-openharmony-arm64": "4.56.0",
        "@rollup/rollup-win32-arm64-msvc": "4.56.0",
        "@rollup/rollup-win32-ia32-msvc": "4.56.0",
        "@rollup/rollup-win32-x64-gnu": "4.56.0",
        "@rollup/rollup-win32-x64-msvc": "4.56.0",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.3.tgz",
      "integrity": "sha512-Js0m9cx+qOgDxo0eMiFGEueWztz+d4+M3rGlmKPT+T4IS/jP4ylw3Nwpu6cpTTP8R1MAC1kF4VbdLt3ARf209w==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/vite": {
      "version": "5.4.21",
      "resolved": "https://registry.npmjs.org/vite/-/vite-5.4.21.tgz",
      "integrity": "sha512-o5a9xKjbtuhY6Bi5S3+HvbRERmouabWbyUcpXXUA1u+GNUKoROi9byOJ8M0nHbHYHkYICiMlqxkg1KkYmm25Sw==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "esbuild": "^0.21.3",
        "postcss": "^8.4.43",
        "rollup": "^4.20.0"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || >=20.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || >=20.0.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.4.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        }
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    }
  }
}

==============================
FILE: .\frontend\package.json
==============================
{
  "name": "ai-trogiang-frontend",
  "private": true,
  "version": "0.1.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build"
  },
  "dependencies": {
    "axios": "^1.6.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.0.0",
    "vite": "^5.0.0"
  }
}

==============================
FILE: .\frontend\vite.config.js
==============================
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173
  }
});

==============================
FILE: .\frontend\src\App.jsx
==============================
// FILE: frontend/src/App.jsx
import React from "react";
import FileUpload from "./components/FileUpload";
import ChatBox from "./components/ChatBox";

export default function App() {
  return (
    <div style={{ maxWidth: "800px", margin: "0 auto", padding: "20px", fontFamily: "Arial" }}>
      <h1 style={{ textAlign: "center", color: "#2c3e50" }}>
        AI Tr·ª£ Gi·∫£ng (Demo No Auth)
      </h1>
      
      {/* 1. Khu v·ª±c Upload (Lu√¥n hi·ªÉn th·ªã) */}
      <section style={{ 
        marginBottom: "30px", padding: "20px", 
        border: "1px solid #ddd", borderRadius: "8px", 
        backgroundColor: "#f9f9f9" 
      }}>
        <FileUpload />
      </section>

      {/* 2. Khu v·ª±c Chat (Lu√¥n hi·ªÉn th·ªã) */}
      <section>
        <ChatBox />
      </section>
    </div>
  );
}
==============================
FILE: .\frontend\src\main.jsx
==============================
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";

ReactDOM.createRoot(document.getElementById("root")).render(<App />);

==============================
FILE: .\frontend\src\api\client.js
==============================
import axios from "axios";

// Kh·ªüi t·∫°o axios instance c∆° b·∫£n nh·∫•t
export const api = axios.create({
  baseURL: "http://127.0.0.1:8000",
});
export default api;
// KH√îNG th√™m b·∫•t k·ª≥ interceptors n√†o li√™n quan ƒë·∫øn Authorization ·ªü ƒë√¢y
==============================
FILE: .\frontend\src\components\ChatBox.jsx
==============================
// FILE: frontend/src/components/ChatBox.jsx
import React, { useState } from 'react';
import { api } from '../api/client'; // Ho·∫∑c import axios tr·ª±c ti·∫øp n·∫øu ch∆∞a config api

const ChatBox = () => {
  const [question, setQuestion] = useState("");
  const [answer, setAnswer] = useState("");
  const [loading, setLoading] = useState(false);

  const handleSend = async () => {
    if (!question.trim()) return;
    setLoading(true);
    setAnswer("");

    try {
      // FIX: G·ªçi ƒë√∫ng POST /chat/query
      // ƒê·∫£m b·∫£o baseURL l√† http://localhost:8000
      const res = await api.post("/chat/query", {
        question: question,
        course_id: "ML101" 
      });

      setAnswer(res.data.answer);
    } catch (err) {
      console.error(err);
      setAnswer("L·ªói k·∫øt n·ªëi server!");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div style={{ border: "1px solid #ccc", padding: "20px", borderRadius: "8px" }}>
      <h3>H·ªèi ƒë√°p AI</h3>
      <textarea 
        style={{ width: "100%", padding: "10px", marginBottom: "10px" }}
        rows={3}
        value={question}
        onChange={(e) => setQuestion(e.target.value)}
        placeholder="Nh·∫≠p c√¢u h·ªèi..."
      />
      <button onClick={handleSend} disabled={loading} style={{ padding: "10px 20px" }}>
        {loading ? "ƒêang suy nghƒ©..." : "G·ª≠i c√¢u h·ªèi"}
      </button>
      
      {answer && (
        <div style={{ marginTop: "20px", padding: "10px", background: "#eef" }}>
          <strong>Tr·∫£ l·ªùi:</strong>
          <p style={{ whiteSpace: "pre-wrap" }}>{answer}</p>
        </div>
      )}
    </div>
  );
};

export default ChatBox;
==============================
FILE: .\frontend\src\components\FileUpload.jsx
==============================
import React, { useState } from 'react';
import api from '../api/client';

const FileUpload = () => {
  const [file, setFile] = useState(null);
  const [loading, setLoading] = useState(false);

  const handleUpload = async () => {
    if (!file) return alert("Ch·ªçn file!");
    const formData = new FormData();
    formData.append('file', file);

    setLoading(true);
    try {
      await api.post('/upload/', formData, {
        params: { course_id: 'ML101' },
        headers: { 'Content-Type': 'multipart/form-data' }
      });
      alert("Upload th√†nh c√¥ng!");
    } catch (error) {
      alert("L·ªói upload: " + (error.response?.data?.detail || error.message));
    } finally {
      setLoading(false);
    }
  };

  return (
    <div>
      <input type="file" onChange={(e) => setFile(e.target.files[0])} />
      <button onClick={handleUpload} disabled={loading}>Upload & Ingest</button>
    </div>
  );
};

export default FileUpload;
==============================
FILE: .\tests\test_llama_ingest_strict.py
==============================
# FILE: tests/test_llama_ingest_strict.py
import sys
import os
import shutil
import json

# Add project root to path
sys.path.append(os.getcwd())

from backend.rag.llama_ingest import ingest_canonical_chunks, get_index_path
from backend.rag.retrieval import get_llama_retriever

# --- MOCK DATA ---
MOCK_CHUNKS = [
    {
        "doc_id": "TEST_DOC_1",
        "page": 1,
        "line_start": 1,
        "line_end": 5,
        "text": "Ki·∫øn tr√∫c RAG bao g·ªìm Retrieval v√† Generation. ƒê√¢y l√† test chunk s·ªë 1."
    },
    {
        "doc_id": "TEST_DOC_1",
        "page": 1,
        "line_start": 6,
        "line_end": 10,
        "text": "LlamaIndex gi√∫p qu·∫£n l√Ω d·ªØ li·ªáu cho LLM. ƒê√¢y l√† test chunk s·ªë 2."
    },
    {
        "doc_id": "TEST_DOC_1",
        "page": 2,
        "line_start": 1,
        "line_end": 4,
        "text": "Embedding model chuy·ªÉn text th√†nh vector. ƒê√¢y l√† test chunk s·ªë 3."
    }
]

COURSE_ID = "TEST_COURSE_V1"

def clean_test_env():
    path = get_index_path(COURSE_ID)
    if os.path.exists(path):
        shutil.rmtree(path)
    print(f"üßπ Cleaned test environment: {path}")

def test_ingestion():
    print("\n--- üß™ TEST 1: Initial Ingestion ---")
    
    # 1. First Ingest
    ingest_canonical_chunks(MOCK_CHUNKS, COURSE_ID, "test_file.txt", "TEST_DOC_1")
    
    # Check if files exist
    idx_path = get_index_path(COURSE_ID)
    if os.path.exists(os.path.join(idx_path, "docstore.json")) and \
       os.path.exists(os.path.join(idx_path, "default__vector_store.json")):
        print("‚úÖ Storage files created.")
    else:
        print("‚ùå Storage files MISSING.")
        return False
    return True

def test_deduplication():
    print("\n--- üß™ TEST 2: Deduplication Check ---")
    
    # 2. Re-ingest same chunks (Expect skipping all)
    print("running re-ingest (should skip all)...")
    ingest_canonical_chunks(MOCK_CHUNKS, COURSE_ID, "test_file.txt", "TEST_DOC_1")
    
    # 3. Ingest new chunk
    NEW_CHUNK = [{
        "doc_id": "TEST_DOC_2", 
        "page": 99, 
        "line_start": 1, 
        "line_end": 1, 
        "text": "ƒê√¢y l√† chunk ho√†n to√†n m·ªõi."
    }]
    print("running ingest new chunk...")
    ingest_canonical_chunks(NEW_CHUNK, COURSE_ID, "test_file_2.txt", "TEST_DOC_2")
    
    print("‚úÖ Deduplication logic executed (check logs for 'Skipped' messages).")

def test_retrieval_integrity():
    print("\n--- üß™ TEST 3: Retrieval & Metadata Integrity ---")
    
    retriever = get_llama_retriever(COURSE_ID, top_k=1)
    results = retriever.retrieve("Ki·∫øn tr√∫c RAG")
    
    if not results:
        print("‚ùå No results found!")
        return

    top_node = results[0]
    meta = top_node.metadata
    
    print("üîç Retrieved Node Metadata:")
    print(json.dumps(meta, indent=2))
    
    # Strict Validation Checks
    checks = [
        ("page" in meta, "Missing 'page'"),
        (meta.get("page") == 1, "Wrong 'page' value"),
        ("line_start" in meta, "Missing 'line_start'"),
        ("line_end" in meta, "Missing 'line_end'"),
        (meta.get("doc_id") == "TEST_DOC_1", "Wrong 'doc_id'"),
        (meta.get("index_version") == "v1.0", "Missing/Wrong version"),
        (meta.get("embedding_model") == "sentence-transformers/all-MiniLM-L6-v2", "Wrong Embedding Tag")
    ]
    
    passed = True
    for condition, msg in checks:
        if not condition:
            print(f"‚ùå FAIL: {msg}")
            passed = False
    
    if passed:
        print("‚úÖ All Metadata checks PASSED.")

def main():
    clean_test_env()
    if test_ingestion():
        test_deduplication()
        test_retrieval_integrity()
    
    print("\nüéâ ALL TESTS COMPLETED.")

if __name__ == "__main__":
    main()
==============================
FILE: .\tests\test_strict_chunking.py
==============================
import json
import sys
import os

# Th√™m ƒë∆∞·ªùng d·∫´n ƒë·ªÉ import ƒë∆∞·ª£c module backend
sys.path.append(os.getcwd())

from backend.rag.chunking import chunk_canonical_data

# 1. GI·∫¢ L·∫¨P INPUT (Canonical Structured TXT)
# D·ªØ li·ªáu gi·∫£ l·∫≠p 2 trang, c√≥ d√≤ng, c√≥ n·ªôi dung li·ªÅn m·∫°ch
mock_canonical_input = [
    {
        "page": 1,
        "source": "manual_upload",
        "lines": [
            {"line_id": 1, "text": "CH∆Ø∆†NG 1: GI·ªöI THI·ªÜU V·ªÄ MACHINE LEARNING"},
            {"line_id": 2, "text": "H·ªçc m√°y (Machine Learning) l√† m·ªôt lƒ©nh v·ª±c c·ªßa tr√≠ tu·ªá nh√¢n t·∫°o."},
            {"line_id": 3, "text": "N√≥ t·∫≠p trung v√†o vi·ªác x√¢y d·ª±ng c√°c h·ªá th·ªëng c√≥ kh·∫£ nƒÉng h·ªçc h·ªèi t·ª´ d·ªØ li·ªáu."},
            {"line_id": 4, "text": "Thay v√¨ l·∫≠p tr√¨nh c√°c quy t·∫Øc c·ª• th·ªÉ, ch√∫ng ta hu·∫•n luy·ªán m√¥ h√¨nh."},
            {"line_id": 5, "text": "M√¥ h√¨nh s·∫Ω t·ª± t√¨m ra c√°c quy lu·∫≠t ·∫©n ch·ª©a b√™n trong d·ªØ li·ªáu ƒë·∫ßu v√†o."},
            {"line_id": 6, "text": "C√≥ ba lo·∫°i h·ªçc m√°y ch√≠nh: H·ªçc c√≥ gi√°m s√°t, kh√¥ng gi√°m s√°t v√† b√°n gi√°m s√°t."},
            {"line_id": 7, "text": "Trong h·ªçc c√≥ gi√°m s√°t, d·ªØ li·ªáu ƒë∆∞·ª£c d√°n nh√£n c·ª• th·ªÉ."},
            {"line_id": 8, "text": "V√≠ d·ª•: Ph√¢n lo·∫°i email l√† spam hay kh√¥ng spam d·ª±a tr√™n l·ªãch s·ª≠."},
            {"line_id": 9, "text": "H·ªçc kh√¥ng gi√°m s√°t x·ª≠ l√Ω d·ªØ li·ªáu ch∆∞a ƒë∆∞·ª£c d√°n nh√£n."},
            {"line_id": 10, "text": "M·ª•c ti√™u l√† t√¨m ra c·∫•u tr√∫c ·∫©n, v√≠ d·ª• nh∆∞ gom nh√≥m kh√°ch h√†ng."}
        ]
    },
    {
        "page": 2,
        "source": "manual_upload",
        "lines": [
            {"line_id": 1, "text": "CH∆Ø∆†NG 2: M·∫†NG N∆†-RON NH√ÇN T·∫†O"},
            {"line_id": 2, "text": "M·∫°ng n∆°-ron ƒë∆∞·ª£c l·∫•y c·∫£m h·ª©ng t·ª´ b·ªô n√£o con ng∆∞·ªùi."},
            {"line_id": 3, "text": "N√≥ bao g·ªìm c√°c l·ªõp: L·ªõp ƒë·∫ßu v√†o, l·ªõp ·∫©n v√† l·ªõp ƒë·∫ßu ra."},
            {"line_id": 4, "text": "M·ªói n∆°-ron nh·∫≠n t√≠n hi·ªáu, nh√¢n tr·ªçng s·ªë v√† ƒëi qua h√†m k√≠ch ho·∫°t."},
            {"line_id": 5, "text": "Deep Learning l√† thu·∫≠t ng·ªØ ch·ªâ c√°c m·∫°ng n∆°-ron c√≥ nhi·ªÅu l·ªõp ·∫©n."},
            {"line_id": 6, "text": "·ª®ng d·ª•ng c·ªßa Deep Learning bao g·ªìm nh·∫≠n di·ªán ·∫£nh v√† x·ª≠ l√Ω ng√¥n ng·ªØ."}
        ]
    }
]

def run_test():
    doc_id = "DOC_TEST_001"
    
    # 2. CH·∫†Y LOGIC CHUNKING
    print("‚è≥ ƒêang th·ª±c hi·ªán Chunking...")
    chunks = chunk_canonical_data(mock_canonical_input, doc_id)
    
    # 3. XU·∫§T OUTPUT RA JSONL
    output_file = "chunks_output.jsonl"
    with open(output_file, "w", encoding="utf-8") as f:
        for chunk in chunks:
            f.write(json.dumps(chunk, ensure_ascii=False) + "\n")
            
    print(f"‚úÖ ƒê√£ t·∫°o file output: {output_file}")
    print(f"üìä T·ªïng s·ªë chunks: {len(chunks)}")
    
    # In m·∫´u ƒë·ªÉ ki·ªÉm tra
    print("\n--- M·∫™U 2 CHUNKS ƒê·∫¶U TI√äN ---")
    for c in chunks[:2]:
        print(json.dumps(c, indent=2, ensure_ascii=False))

if __name__ == "__main__":
    run_test()
==============================
FILE: .\uploads\test_knowledge.txt
==============================
Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† H√† N·ªôi. Kh√≥a h·ªçc ML101 d·∫°y v·ªÅ Machine Learning c∆° b·∫£n.